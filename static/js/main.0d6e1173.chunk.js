(this["webpackJsonptinder-project"]=this["webpackJsonptinder-project"]||[]).push([[0],{147:function(e,t,n){e.exports={btnStyle:"Matches_btnStyle__1K_MD"}},185:function(e,t,n){},197:function(e,t,n){},239:function(e,t,n){},241:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(17),r=n.n(o),i=n(9),s=(n(185),n(25)),l=n(280),u=n(285),d=n(134),j=n.n(d),b=n(306),h=n(150),m=n(32),g=n(286),O=n(283),p=n(74);p.a.initializeApp({apiKey:"AIzaSyBTxAOZJx56d3i9hCiD5ZcYpnp4cvfady4",authDomain:"fir-project-d9b09.firebaseapp.com",projectId:"fir-project-d9b09",storageBucket:"fir-project-d9b09.appspot.com",messagingSenderId:"74333153272",appId:"1:74333153272:web:ebfbec43f8b31327d1980d"});var f=p.a.firestore(),x=(p.a.storage(),p.a.auth()),v=p.a,y=n(15),C=n.p+"static/media/DINDER-LOGO.9a4493a1.png",w=n(1),N=Object(l.a)((function(e){return{root:{flexGrow:1,width:"100%",marginTop:"50px",fontFamily:"Nunito"},logoPaper:{margin:"".concat(e.spacing(1),"px auto"),background:"rgba(255,255,255,0.3)",padding:"0 10px",minWidth:"120px"},logo:{width:"100px"},appBar:{zIndex:"1",background:"none",padding:"0 ".concat(e.spacing(3),"px"),marginTop:10},title:{fontSize:"3rem"},menuIcon:{fontSize:"35px"},"& ul":{padding:"40 !important"},linkMenuItem:{textDecoration:"none !important","&:focus":{outline:"none !important"}},menu:{"& div ul.MuiList-padding":{}}}}));function S(){var e=N(),t=c.a.useState(null),n=Object(i.a)(t,2),a=n[0],o=n[1],r=(Boolean(a),Object(y.b)()),s=Object(y.c)((function(e){return e.currentUser}));return Object(w.jsxs)("div",{className:e.root,children:[Object(w.jsx)(O.a,{}),Object(w.jsx)(u.a,{elevation:0,className:e.appBar,children:Object(w.jsxs)(g.a,{container:!0,justify:"space-between",alignItems:"center",children:[Object(w.jsx)(g.a,{item:!0,xs:1,children:Object(w.jsx)("img",{src:C,className:e.logo,alt:"logo"})}),Object(w.jsxs)(g.a,{children:[Object(w.jsx)(j.a,{className:e.menuIcon,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){o(e.currentTarget)}}),Object(w.jsxs)(h.a,{id:"simple-menu",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:function(){o(null)},className:e.menu,children:[Object(w.jsx)(b.a,{component:m.b,className:e.linkMenuItem,to:"/",children:"Home"}),s.uid?Object(w.jsxs)("div",{children:[Object(w.jsx)(b.a,{component:m.b,className:e.linkMenuItem,to:"/matches",children:"Matches"}),Object(w.jsx)(b.a,{component:m.b,className:e.linkMenuItem,to:"/profile",children:"Profile"}),Object(w.jsx)(b.a,{component:m.b,className:e.linkMenuItem,to:"/",onClick:function(){x.signOut().then(r({type:"userLoggedOut"})).catch((function(e){return console.log(e.message)}))},children:"Logout"})]}):Object(w.jsxs)("div",{children:[Object(w.jsx)(b.a,{component:m.b,className:e.linkMenuItem,to:"/register",children:"Register"}),Object(w.jsx)(b.a,{component:m.b,className:e.linkMenuItem,to:"/login",children:"Login"})]})]})]})]})})]})}var k=n(16),I=n(73),M=n(28),U=n(135),A=n.n(U),E=(n(197),n(137)),_=n.n(E),F=n(136),T=n.n(F),B=n(292),P=n(293),R=n(296),D=n(295),L=n(294),z=n(291),W=n(153),Y=n(307),V=Object(l.a)({root:{height:200}});function G(e){return"Age range: ".concat(e)}function J(e){var t=e.lowestAge,n=e.highestAge,c=e.setAgeRange,o=V(),r=Object(a.useState)([t,n]),s=Object(i.a)(r,2),l=s[0],u=s[1];return Object(w.jsxs)("div",{className:o.root,children:[Object(w.jsx)(W.a,{id:"range-slider",gutterBottom:!0,children:G(l).replace(","," - ")}),Object(w.jsx)(Y.a,{style:{color:"white"},orientation:"vertical",min:t,max:n,value:l,onChange:function(e,t){u(t)},valueLabelDisplay:"auto","aria-labelledby":"range-slider",getAriaValueText:function(){return G},onChangeCommitted:function(){return c(l)}})]})}var H=n(305),Z=n(308),Q=n(289),$=n(243),K=n(244);function X(e){var t=e.setGenderValue,n=(Object(l.a)({root:{"& legend":{color:"white"}}}),c.a.useState("all")),a=Object(i.a)(n,2),o=a[0],r=a[1];return Object(w.jsxs)($.a,{component:"fieldset",children:[Object(w.jsx)(K.a,{component:"legend",children:"Gender"}),Object(w.jsxs)(Z.a,{display:"flex","aria-label":"gender",name:"gender1",value:o,onChange:function(e){r(e.target.value),t(e.target.value)},children:[Object(w.jsx)(Q.a,{value:"female",control:Object(w.jsx)(H.a,{color:"secondary"}),label:"Female"}),Object(w.jsx)(Q.a,{value:"male",control:Object(w.jsx)(H.a,{color:"primary"}),label:"Male"}),Object(w.jsx)(Q.a,{value:"other",control:Object(w.jsx)(H.a,{color:"default"}),label:"Other"}),Object(w.jsx)(Q.a,{value:"all",control:Object(w.jsx)(H.a,{color:"default"}),label:"All"})]})]})}Object(l.a)({root:{width:300}});function q(){var e=Object(y.b)(),t=Object(y.c)((function(e){return e.alreadyRemoved})),n=Object(y.c)((function(e){return e.currentUser})),o=Object(y.c)((function(e){return e.allUsers})),r=Object(a.useState)([]),s=Object(i.a)(r,2),l=s[0],u=s[1],d=Object(a.useState)(!0),j=Object(i.a)(d,2),b=j[0],h=j[1],g=Object(a.useMemo)((function(){return Array(l.length).fill(0).map((function(e){return c.a.createRef()}))}),[l.length]),O=o.map((function(e){return+e.age})).sort((function(e,t){return e-t})).filter((function(e){return!isNaN(e)}))[0],p=o.map((function(e){return+e.age})).sort((function(e,t){return t-e})).filter((function(e){return!isNaN(e)}))[0],x=Object(a.useState)([O,p]),C=Object(i.a)(x,2),N=C[0],S=C[1],U=Object(a.useState)("all"),E=Object(i.a)(U,2),F=E[0],Y=E[1],V=Object(a.useState)(""),G=Object(i.a)(V,2),H=G[0],Z=G[1],Q=Object(a.useState)(""),$=Object(i.a)(Q,2),K=$[0],q=$[1];function ee(e){var t=e.filter((function(e){return!n.liked.includes(e.uid)&&!n.disliked.includes(e.uid)&&!n.matches.includes(e.uid)&&n.uid!==e.uid}));return"all"===F?t.filter((function(e){return e.age>=N[0]&&e.age<=N[1]})):t.filter((function(e){return e.age>=N[0]&&e.age<=N[1]&&e.gender===F}))}Object(a.useEffect)((function(){var e=ee(o);u(e)}),[N,F]);var te=function(e){console.log(e+" left the screen!!@#@!$!%@!$%#@^&#%&*@!$&^")},ne=function(e,t){f.collection("users").doc(e).update({matches:v.firestore.FieldValue.arrayUnion(t)}),function(e,t){var n=e>t?"".concat(t,"_").concat(e):"".concat(e,"_").concat(t);f.collection("chatRooms").doc(n).set({messages:[],users:[e,t],isTyping:!1}).then((function(){return console.log("Successfully created chatRoom with users: ",[e,t])})).catch((function(e){return console.log("Error on chatRoom creation: ",e.message)}))}(e,t),f.collection("users").doc(t).update({matches:v.firestore.FieldValue.arrayUnion(e)}).then((function(){ae("getAllUsers",o.map((function(n){return n.uid===t&&(n.matches=[].concat(Object(M.a)(n.matches),[e])),n}))),ae("userAddedToMatches",t)}))};function ae(t,n){e({type:t,payload:n})}var ce=function(e,t){console.log("arrProp",e),"Matches"!==e&&f.collection("users").doc(n.uid).update(Object(I.a)({},e.toLowerCase(),v.firestore.FieldValue.arrayUnion(t))).then((function(){ae("userAddedTo".concat(e),t)})).catch((function(e){console.error("Error updating document: ",e)})),te(t),"Liked"===e&&f.collection("users").doc(t).get().then((function(e){e.data().liked.includes(n.uid)&&ne(n.uid,t)})),"Matches"===e&&ne(n.uid,t)},oe=function(e){var n=l.filter((function(e){return!t.includes(e.uid)}));if(n.length){var a=n[n.length-1].uid,c=l.map((function(e){return e.uid})).indexOf(a);g[c].current.swipe(e)}},re=function(e,t){f.collection("users").doc(n.uid).update(Object(I.a)({},e.toLowerCase(),[].concat(Object(M.a)(n[e.toLowerCase()]),[t]))).then((function(){ae("userLoggedIn",Object(k.a)(Object(k.a)({},n),{},Object(I.a)({},e.toLowerCase(),[].concat(Object(M.a)(n[e.toLowerCase()]),[t]))))})).catch((function(e){console.error("Error updating document: ",e)})),"Liked"===e&&f.collection("users").doc(t).get().then((function(e){e.data().liked.includes(n.uid)&&ne(n.uid,t)})),"Matches"===e&&f.collection("users").doc(t).get().then((function(){ne(n.uid,t)}));var a=ee(o).filter((function(e){return e.uid!==t}));u(a)},ie=function(){var e=ee(o).filter((function(e){return!t.includes(e)}));u(e),h(!b)};return Object(a.useEffect)((function(){if(t.length>0){var e=t[t.length-1],n=o.find((function(t){return t.uid===e})).name;q(n)}}),[t]),Object(w.jsxs)("div",{style:{minWidth:"450px",color:"white"},children:[Object(w.jsx)(z.a,{onClick:function(){n.matches.forEach((function(e){f.collection("users").doc(e).get().then((function(t){var a=t.data().matches.filter((function(e){return e!==n.uid}));f.collection("users").doc(e).update({matches:a})}))})),f.collection("users").doc(n.uid).update({liked:[],disliked:[],matches:[]}).then((function(){e({type:"userLoggedIn",payload:Object(k.a)(Object(k.a)({},n),{},{liked:[],disliked:[],matches:[]})}),console.log("Successfully reset currentUser: ",n)})),f.collection("chatRooms").get().then((function(e){return e.forEach((function(e){e.id.includes(n.uid)&&f.collection("chatRooms").doc(e.id).delete().then((function(){return console.log("Successfully deleted the chatRooms for user: ",n)}))}))}))},variant:"contained",className:"resetButton",children:"Reset currentUser"}),Object(w.jsx)(z.a,{onClick:function(){f.collection("users").get().then((function(e){return e.forEach((function(e){e.ref.update({liked:[],disliked:[],matches:[]})}))})).then((function(){e({type:"getAllUsers",payload:o.map((function(e){return e.matches=[]}))}),u(o)}));var t=f.collection("chatRooms");t.get().then((function(e){return e.forEach((function(e){return t.doc(e.id).delete()}))}))},variant:"contained",className:"resetButton",children:"Reset all users"}),b?Object(w.jsxs)("div",{style:{width:"85%",margin:"0 auto",zIndex:"2"},children:[Object(w.jsx)(T.a,{onClick:ie,fontSize:"large",style:{marginTop:"20px"}}),Object(w.jsx)("link",{href:"https://fonts.googleapis.com/css?family=Damion&display=swap",rel:"stylesheet"}),Object(w.jsx)("link",{href:"https://fonts.googleapis.com/css?family=Alatsi&display=swap",rel:"stylesheet"}),Object(w.jsx)("h1",{className:"homeTitle",children:"React Tinder Card"}),Object(w.jsx)("div",{className:"cardContainer",children:l.map((function(t,n){return Object(w.jsx)(A.a,{ref:g[n],className:"swipe",onSwipe:function(n){!function(t,n){var a="",c="";switch(t){case"left":a="Disliked",c="disliked";break;case"right":a="Liked",c="liked";break;case"up":a="Matches",c="matched";break;case"down":a="Disliked",c="disliked"}ce(a,n),Z(c),e({type:"addToRemoved",payload:n})}(n,t.uid,t.name)},onCardLeftScreen:function(){return te(t.uid)},children:Object(w.jsx)("div",{style:{backgroundImage:"url("+(t.images[0]||"https://firebasestorage.googleapis.com/v0/b/fir-project-d9b09.appspot.com/o/profilePics%2Fdefault-profile-pic.jpg?alt=media&token=12bd0268-84bd-47ee-9bf7-5ca4269f87d5")+")"},className:"card",children:Object(w.jsx)("h3",{children:t.name})})},t.uid)}))}),Object(w.jsxs)("div",{className:"buttons",children:[Object(w.jsx)("button",{onClick:function(){return oe("left")},children:"Swipe left!"}),Object(w.jsx)("button",{onClick:function(){return oe("right")},children:"Swipe right!"})]}),H?Object(w.jsxs)("h3",{className:"infoText",children:["You ",H," ",K,"!"]},H):Object(w.jsx)("h3",{className:"infoText",children:"Swipe a card or press a button to get started!"})]}):Object(w.jsxs)("div",{children:[Object(w.jsxs)("div",{className:"filtersContainer",children:[Object(w.jsx)(X,{setGenderValue:Y}),Object(w.jsx)(J,{lowestAge:O,highestAge:p,setAgeRange:S})]}),Object(w.jsx)(_.a,{onClick:ie,fontSize:"large",style:{marginTop:"20px",zIndex:"2"}}),Object(w.jsx)("div",{className:"cardViewWrapper",children:Object(w.jsx)("div",{className:"containerCardView",children:l.map((function(t){return Object(w.jsxs)(B.a,{elevation:20,className:"root",onClick:function(){return function(t){e({type:"setChosenProfile",payload:t}),window.localStorage.setItem("chosenProfile",JSON.stringify(t))}(t)},children:[Object(w.jsxs)(P.a,{component:m.b,to:"/chosenProfile/"+t.uid,children:[Object(w.jsx)(L.a,{className:"media",image:t.images[0]||"https://firebasestorage.googleapis.com/v0/b/fir-project-d9b09.appspot.com/o/profilePics%2Fdefault-profile-pic.jpg?alt=media&token=12bd0268-84bd-47ee-9bf7-5ca4269f87d5",title:t.name}),Object(w.jsx)(D.a,{children:Object(w.jsxs)(W.a,{className:"colorBlack",gutterBottom:!0,variant:"h5",component:"h2",children:[t.name.split(" ")[0]," ",t.age]})})]}),Object(w.jsxs)(R.a,{className:"btnContainer",children:[Object(w.jsx)(z.a,{size:"small",color:"primary",onClick:function(){return re("Disliked",t.uid)},children:"Dislike"}),Object(w.jsx)(z.a,{size:"small",color:"primary",onClick:function(){return re("Liked",t.uid)},children:"Like"})]})]},t.uid)}))})})]})]})}var ee=n(8),te=n(152),ne=n(250),ae=n(247),ce=n(300),oe=n(57),re=n.n(oe),ie=n(93),se=n(309),le=n(298),ue=n(299),de=n(139),je=n.n(de),be=n(297),he=Object(l.a)((function(e){return{paper:{position:"relative",height:"200px",width:"130px",margin:"13px 13px",backgroundColor:"rgba(255,255,255,0.5)","& .MuiFab-root:hover":{backgroundColor:"#e66465","& .MuiSvgIcon-root":{color:"rgb(225,225,225)"}},"& input":{display:"none"}},divImg:{height:"100%",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",display:"flex",justifyContent:"center",alignItems:"center"},smallBtn:{position:"absolute",top:"-20px",right:"-20px",width:"40px",height:"40px","& .MuiSvgIcon-root":{width:"25px"},color:"#e66465",background:"rgb(225,225,225)"},error:{color:"red",width:"90%",fontWeight:"bold",backgroundColor:"rgba(255,255,255,0.8)"}}})),me=function(e){var t=e.id,n=e.userId,c=e.imgUrl,o=e.replaceImgUrl,r=e.updateImages,s=he(),l=Object(a.useState)(""),u=Object(i.a)(l,2),d=u[0],j=u[1],b=Object(a.useState)(!1),h=Object(i.a)(b,2),m=h[0],g=h[1],O=Object(a.useState)(null),p=Object(i.a)(O,2),f=p[0],x=p[1];return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(te.a,{elevation:6,className:s.paper,children:[Object(w.jsxs)("div",{className:s.divImg,style:{backgroundImage:"url(".concat(c,")")},children:[d?Object(w.jsx)("span",{className:s.error,children:d}):null,m?Object(w.jsx)(be.a,{variant:"determinate",value:f}):null]}),Object(w.jsx)("input",{accept:"image/*",className:s.input,id:"contained-button-file-".concat(t),multiple:!1,type:"file",onChange:function(e){return function(e){var a=e.target;if(a.files&&a.files[0]){var c=a.files[0];if(c.size>6123456)return void j("Image must be less then 6Mb!");g(!0),j("");var i=c.name.lastIndexOf("."),s=c.name.slice(0,i)+Date.now();console.log(s);var l=v.storage().ref().child("".concat(n,"/").concat(s)).put(c);l.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(x(t),e.state){case v.storage.TaskState.PAUSED:console.log("Upload is paused");break;case v.storage.TaskState.RUNNING:console.log("Upload is running")}}),(function(e){console.log("An error occurred on image upload ",e.message)}),(function(){l.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),function(){var n=Object(ie.a)(re.a.mark((function n(){return re.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o(t,e);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()().then((function(e){return r(e)})),g(!1)})).catch((function(e){return console.log("Error while uploading the image: ",e.message)}))}))}}(e)}}),Object(w.jsx)("label",{htmlFor:"contained-button-file-".concat(t),children:Object(w.jsx)(se.a,{title:"Add Photo",arrow:!0,TransitionComponent:le.a,placement:"right",children:Object(w.jsx)(ue.a,{component:"div",className:s.smallBtn,children:Object(w.jsx)(je.a,{})})})})]})})},ge=Object(l.a)({root:{width:"40vw",minWidth:"400px",margin:"0 auto","& .MuiSvgIcon-root.MuiSelect-icon ":{color:"white"},"& .MuiInput-underline:hover:not(.Mui-disabled):before":{borderBottomColor:"white"},"& .MuiInput-underline.Mui-disabled:before":{borderBottom:"1px solid rgb(205,205,205)"},"& .MuiInput-underline:before":{borderBottomColor:"white"},"&:hover":{borderBottomColor:"red"},"& input.MuiInputBase-input.MuiInput-input":{color:"white"},"& div.MuiSelect-select.MuiSelect-selectMenu.MuiInputBase-input.MuiInput-input":{color:"white"}},paper:{margin:"5px 0",background:"none",color:"white"},item:{width:"100%",margin:"20px 0"},button:{color:"#e66465",background:"#9198e5"},input:{display:"none",color:"white","& .MuiInputBase-input":{color:"white"}},formControl:{"& .MuiSelect-select:focus":{background:"none"},minWidth:"250px",margin:0}}),Oe=Object(ee.a)({root:{"& label":{color:"rgb(225, 225, 225)"},"& label.Mui-focused":{color:"rgb(225, 225, 225)"},"& .MuiInput-underline:before":{borderBottomColor:"white"},"& .MuiInput-underline:after":{borderBottomColor:"#1976d2"},"& .MuiOutlinedInput-root":{color:"rgb(225, 225, 225)","& fieldset":{borderColor:"rgb(225, 225, 225)"},"&:hover fieldset":{borderColor:"rgb(225, 225, 225)"}}}})(ce.a),pe=function(){var e=Object(y.b)(),t=Object(y.c)((function(e){return e.currentUser})),n=f.collection("users").doc(t.uid),c=ge(),o=Object(a.useState)(t.aboutYou),r=Object(i.a)(o,2),s=r[0],l=r[1],u=t.passions.join(", "),d=Object(a.useState)(u),j=Object(i.a)(d,2),h=j[0],m=j[1],p=Object(a.useState)(t.gender),x=Object(i.a)(p,2),v=x[0],C=x[1],N=Object(a.useState)(t.sexualOrientation),S=Object(i.a)(N,2),k=S[0],I=S[1],U=t.country.split(" ")[0],A=t.country.split(" ")[1],E=Object(a.useState)(U),_=Object(i.a)(E,2),F=_[0],T=_[1],B=Object(a.useState)([]),P=Object(i.a)(B,2),R=P[0],D=P[1],L=Object(a.useState)(A),z=Object(i.a)(L,2),Y=z[0],V=z[1],G=Object(a.useState)([]),J=Object(i.a)(G,2),K=J[0],X=J[1],q=Object(a.useState)(t.jobTitle),ee=Object(i.a)(q,2),ce=ee[0],oe=ee[1],re=Object(a.useState)(t.company),ie=Object(i.a)(re,2),se=ie[0],le=ie[1],ue=Object(a.useState)(t.collageOrUni),de=Object(i.a)(ue,2),je=de[0],be=de[1];Object(a.useEffect)((function(){F&&fetch("https://restcountries.eu/rest/v2/region/"+F).then((function(e){return e.json()})).then((function(e){return D(e)})).catch((function(e){return console.log(e)}))}),[F]),Object(a.useEffect)((function(){f.collection("users").doc("".concat(t.uid)).get().then((function(e){if(e.exists){var t=fe(e.data().images,6);X(t)}})).catch((function(e){console.log("Error getting document:",e)}))}),[]);var he=function(e){return f.collection("users").doc("".concat(t.uid)).update({images:e}).then((function(){console.log("Document successfully updated!")})).catch((function(e){console.error("Error updating document: ",e)}))},pe=function(t,n){var a=Object(M.a)(K);return a[t]=n,X(a),e({type:"userChangedProfilePic",payload:a}),a},fe=function(e,t){var n=Object(M.a)(e);return n.length=t,e.length<t&&n.fill("",e.length),n};return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(O.a,{}),Object(w.jsx)("form",{noValidate:!0,autoComplete:"off",children:Object(w.jsxs)(g.a,{container:!0,className:c.root,direction:"column",children:[Object(w.jsx)(g.a,{item:!0,children:Object(w.jsx)(te.a,{elevation:0,className:c.paper,children:Object(w.jsxs)(g.a,{container:!0,direction:"column",children:[Object(w.jsx)(g.a,{item:!0,className:c.item,children:Object(w.jsx)(W.a,{variant:"h4",children:"Upload your images"})}),Object(w.jsx)(g.a,{container:!0,justify:"center",wrap:"wrap",style:{margin:"30px 0",padding:"20px"},children:K.map((function(e,n){return Object(w.jsx)(g.a,{item:!0,children:Object(w.jsx)(me,{id:n,userId:t.uid,replaceImgUrl:pe,updateImages:he,imgUrl:K[n]||""},n)},n)}))})]})})}),Object(w.jsx)(g.a,{item:!0,children:Object(w.jsx)(te.a,{elevation:0,className:c.paper,children:Object(w.jsxs)(g.a,{container:!0,direction:"column",alignItems:"center",children:[Object(w.jsx)(g.a,{item:!0,className:c.item,children:Object(w.jsx)(W.a,{variant:"h4",children:"About you"})}),Object(w.jsx)(g.a,{item:!0,xs:"auto",style:{width:"80%",marginBottom:"30px"},children:Object(w.jsx)(Oe,{id:"outlined-multiline-flexible",label:"About you",multiline:!0,rows:4,rowsMax:4,fullWidth:!0,value:s,onChange:function(e){l(e.target.value)},onBlur:function(a){t.aboutYou!==s&&n.update({aboutYou:a.target.value}).then((function(){console.log("Updated successfully"),e({type:"userChangedAboutYou",payload:a.target.value})})).catch((function(e){console.log("Error updating",e)}))},variant:"outlined"})})]})})}),Object(w.jsx)(g.a,{item:!0,children:Object(w.jsx)(te.a,{elevation:0,className:c.paper,children:Object(w.jsxs)(g.a,{container:!0,direction:"column",alignItems:"center",children:[Object(w.jsx)(g.a,{item:!0,className:c.item,children:Object(w.jsx)(W.a,{variant:"h4",children:"Passions"})}),Object(w.jsx)(g.a,{item:!0,xs:"auto",style:{width:"80%",marginBottom:"30px"},children:Object(w.jsx)(Oe,{id:"outlined-multiline-flexible",label:"Passions",multiline:!0,rows:4,rowsMax:4,fullWidth:!0,value:h,onChange:function(e){m(e.target.value)},onBlur:function(a){var c=h.split(", ");t.passions.join(", ")!==c&&n.update({passions:c}).then((function(){console.log("Updated successfully"),e({type:"userChangedPassions",payload:c})})).catch((function(e){console.log("Error updating",e)}))},variant:"outlined",placeholder:'Separate them by ", "'})})]})})}),Object(w.jsx)(g.a,{item:!0,children:Object(w.jsx)(te.a,{elevation:0,className:c.paper,children:Object(w.jsxs)(g.a,{container:!0,direction:"column",alignItems:"center",children:[Object(w.jsx)(g.a,{item:!0,className:c.item,children:Object(w.jsx)(W.a,{variant:"h4",children:"Gender:"})}),Object(w.jsx)(g.a,{item:!0,xs:"auto",style:{justifyContent:"center"},children:Object(w.jsxs)(Z.a,{style:{margin:"0 auto"},row:!0,"aria-flowto":"right","aria-label":"gender",name:"gender1",value:v,onChange:function(t){C(t.target.value),n.update({gender:t.target.value}).then((function(){console.log("updated successfully"),e({type:"userChangedGender",payload:t.target.value})})).catch((function(e){console.log("Error updating",e)}))},children:[Object(w.jsx)(Q.a,{className:c.radio,value:"female",control:Object(w.jsx)(H.a,{color:"secondary"}),label:"Female"}),Object(w.jsx)(Q.a,{value:"male",control:Object(w.jsx)(H.a,{color:"primary"}),label:"Male"}),Object(w.jsx)(Q.a,{value:"other",control:Object(w.jsx)(H.a,{color:"default"}),label:"Other"})]})})]})})}),Object(w.jsx)(g.a,{item:!0,children:Object(w.jsx)(te.a,{elevation:0,className:c.paper,children:Object(w.jsxs)(g.a,{container:!0,direction:"column",alignItems:"center",children:[Object(w.jsx)(g.a,{item:!0,className:c.item,children:Object(w.jsx)(W.a,{variant:"h4",children:"Sexual orientation:"})}),Object(w.jsx)(g.a,{item:!0,xs:"auto",className:c.item,children:Object(w.jsx)($.a,{className:c.formControl,children:Object(w.jsxs)(ne.a,{variant:"standard",labelId:"demo-simple-select-label",id:"sexualOrientation-select",value:k,onChange:function(t){I(t.target.value),n.update({sexualOrientation:t.target.value}).then((function(){console.log("updated successfully"),e({type:"userChangedOrientation",payload:t.target.value})})).catch((function(e){console.log("Error updating",e)}))},children:[Object(w.jsx)(b.a,{value:"Straight",children:"Straight"}),Object(w.jsx)(b.a,{value:"Gay",children:"Gay"}),Object(w.jsx)(b.a,{value:"Lesbian",children:"Lesbian"}),Object(w.jsx)(b.a,{value:"Bisexual",children:"Bisexual"}),Object(w.jsx)(b.a,{value:"Asexual",children:"Asexual"}),Object(w.jsx)(b.a,{value:"Demisexual",children:"Demisexual"}),Object(w.jsx)(b.a,{value:"Queer",children:"Queer"}),Object(w.jsx)(b.a,{value:"Questioning",children:"Questioning"})]})})})]})})}),Object(w.jsx)(g.a,{item:!0,children:Object(w.jsx)(te.a,{elevation:0,className:c.paper,children:Object(w.jsxs)(g.a,{container:!0,direction:"column",alignItems:"center",children:[Object(w.jsx)(g.a,{item:!0,className:c.item,children:Object(w.jsx)(W.a,{variant:"h4",children:"Living in:"})}),Object(w.jsx)(g.a,{item:!0,xs:"auto",className:c.item,children:Object(w.jsxs)($.a,{className:c.formControl,children:[Object(w.jsx)(ae.a,{style:{color:"white"},children:"Region"}),Object(w.jsxs)(ne.a,{variant:"standard",labelId:"demo-simple-select-label",id:"sexualOrientation-select",value:F,onChange:function(e){T(e.target.value)},children:[Object(w.jsx)(b.a,{value:"africa",children:"Africa"}),Object(w.jsx)(b.a,{value:"americas",children:"Americas"}),Object(w.jsx)(b.a,{value:"asia",children:"Asia"}),Object(w.jsx)(b.a,{value:"europe",children:"Europe"}),Object(w.jsx)(b.a,{value:"oceania",children:"Oceania"})]})]})}),Object(w.jsx)(g.a,{item:!0,xs:"auto",className:c.item,children:Object(w.jsxs)($.a,{className:c.formControl,children:[Object(w.jsx)(ae.a,{style:{color:"white"},disabled:!0,children:"Country"}),Object(w.jsx)(ne.a,{disabled:!F,variant:"standard",labelId:"demo-simple-select-label",id:"country",value:Y,onChange:function(t){V(t.target.value),n.update({country:"".concat(F," ").concat(t.target.value)}).then((function(){console.log("updated successfully"),e({type:"userChangedLivingIn",payload:"".concat(F," ").concat(t.target.value)})})).catch((function(e){console.log("Error updating",e)}))},children:R.map((function(e){return Object(w.jsx)(b.a,{value:e.name,children:e.name},e.alpha2Code)}))})]})})]})})}),Object(w.jsx)(g.a,{item:!0,children:Object(w.jsx)(te.a,{elevation:0,className:c.paper,children:Object(w.jsxs)(g.a,{container:!0,direction:"column",alignItems:"center",children:[Object(w.jsx)(g.a,{item:!0,className:c.item,children:Object(w.jsx)(W.a,{variant:"h4",children:"Job title:"})}),Object(w.jsx)(g.a,{item:!0,xs:"auto",style:{width:"80%",marginBottom:"30px"},children:Object(w.jsx)(Oe,{id:"standard-secondary",label:"Job title",fullWidth:!0,color:"secondary",value:ce,onChange:function(e){oe(e.target.value)},onBlur:function(a){t.jobTitle!==a.target.value&&n.update({jobTitle:a.target.value}).then((function(){console.log("Updated successfully"),e({type:"userChangedJobTitle",payload:a.target.value})})).catch((function(e){console.log("Error updating",e)}))}})})]})})}),Object(w.jsx)(g.a,{item:!0,children:Object(w.jsx)(te.a,{elevation:0,className:c.paper,children:Object(w.jsxs)(g.a,{container:!0,direction:"column",alignItems:"center",children:[Object(w.jsx)(g.a,{item:!0,className:c.item,children:Object(w.jsx)(W.a,{variant:"h4",children:"Company:"})}),Object(w.jsx)(g.a,{item:!0,xs:"auto",style:{width:"80%",marginBottom:"30px"},children:Object(w.jsx)(Oe,{id:"standard-secondary",label:"Company",fullWidth:!0,color:"secondary",value:se,onChange:function(e){le(e.target.value)},onBlur:function(a){t.company!==a.target.value&&n.update({company:a.target.value}).then((function(){console.log("Updated successfully"),e({type:"userChangedCompany",payload:a.target.value})})).catch((function(e){console.log("Error updating",e)}))}})})]})})}),Object(w.jsx)(g.a,{item:!0,children:Object(w.jsx)(te.a,{elevation:0,className:c.paper,children:Object(w.jsxs)(g.a,{container:!0,direction:"column",alignItems:"center",children:[Object(w.jsx)(g.a,{item:!0,className:c.item,children:Object(w.jsx)(W.a,{variant:"h4",children:"College/Uni:"})}),Object(w.jsx)(g.a,{item:!0,xs:"auto",style:{width:"80%",marginBottom:"30px"},children:Object(w.jsx)(Oe,{id:"standard-secondary",label:"College/Uni",fullWidth:!0,color:"secondary",value:je,onChange:function(e){be(e.target.value)},onBlur:function(a){t.collageOrUni!==a.target.value&&n.update({collageOrUni:a.target.value}).then((function(){console.log("Updated successfully"),e({type:"userChangedCollegeOrUni",payload:a.target.value})})).catch((function(e){console.log("Error updating",e)}))}})})]})})})]})})]})},fe=n(251),xe=n(301),ve=n(248),ye=n(302),Ce=n(290),we=n(303),Ne=n(304),Se="https://firebasestorage.googleapis.com/v0/b/fir-project-d9b09.appspot.com/o/profilePics%2Fdefault-profile-pic.jpg?alt=media&token=12bd0268-84bd-47ee-9bf7-5ca4269f87d5",ke=Object(l.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),width:"35ch"},"& .MuiFormControl-root":{"& .MuiFormHelperText-root.MuiFormHelperText-contained":{color:"red !important",fontSize:"0.9rem",padding:0,borderRadius:"0"}}},container:{marginTop:"1rem",width:"max-content",margin:"0 auto",display:"flex",maxWidth:"400px"},label:{lineHeight:"4px"},googleIcon:{width:"1.5rem",marginRight:"8px"}}})),Ie=Object(ee.a)({root:{"& label":{color:"rgb(225, 225, 225)"},"& label.Mui-focused":{color:"rgb(225, 225, 225)"},"& .MuiInput-underline:before":{borderBottomColor:"white"},"& .MuiInput-underline:after":{borderBottomColor:"#1976d2"},"& .MuiOutlinedInput-root":{color:"rgb(225, 225, 225)","& fieldset":{borderColor:"rgb(225, 225, 225)"},"&:hover fieldset":{borderColor:"rgb(225, 225, 225)"}},"& .MuiFormHelperText-contained":{color:"red",fontSize:"0.9rem",padding:0,borderRadius:"0"},"& #email-reg-text-helper.MuiFormHelperText-root.MuiFormHelperText-contained":{color:"red !important",fontSize:"0.9rem",padding:0,borderRadius:"0"}}})(ce.a),Me=Object(ee.a)({root:{"& span.MuiIconButton-label":{color:"rgb(225, 225, 225)"},"& input":{color:"rgb(225, 225, 225)"},"& fieldset":{border:"1px solid rgb(225, 225, 225)"},"&:hover fieldset":{border:"1px solid rgb(225, 225, 225) !important"},"&.MuiOutlinedInput-root.Mui-focused fieldset":{border:"2px solid rgb(225, 225, 225) !important"}}})(fe.a);function Ue(e){e.setCurrentUser;var t=ke(),n=Object(a.useState)(""),c=Object(i.a)(n,2),o=c[0],r=c[1],s=Object(a.useState)(""),l=Object(i.a)(s,2),u=l[0],d=l[1],j=Object(a.useState)(""),b=Object(i.a)(j,2),h=b[0],m=b[1],g=Object(a.useState)(""),p=Object(i.a)(g,2),C=p[0],N=p[1],S=Object(a.useState)(""),k=Object(i.a)(S,2),I=k[0],M=k[1],U=Object(a.useState)(!1),A=Object(i.a)(U,2),E=A[0],_=A[1],F=Object(a.useState)(!1),T=Object(i.a)(F,2),B=T[0],P=T[1],R=Object(a.useState)(!1),D=Object(i.a)(R,2),L=D[0],W=D[1],Y=Object(a.useState)(!1),V=Object(i.a)(Y,2),G=V[0],J=V[1],H=Object(a.useState)(!1),Z=Object(i.a)(H,2),Q=Z[0],K=Z[1],X=Object(a.useState)(!1),q=Object(i.a)(X,2),ee=q[0],te=q[1],ne=Object(y.b)();function ce(e,t){switch(t){case"firstName":m(e);break;case"lastName":N(e);break;case"email":r(e);break;case"password":d(e);break;case"age":M(e)}}var oe=function(e){return/[a-zA-Z][a-zA-Z ]{2,}/.test(e)},re=function(e,t,n,a,c){P(e),W(t),J(n),K(a),te(c)},ie=function(){var e="",t="",n="",a="",c="",r=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(o);return oe(h)||(e="Must be at least 3 letters long!"),oe(C)||(t="Must be at least 3 letters long!"),r||(n="Email is badly formatted!"),I<18&&(a="Must be over 18!"),u.length<6&&(c="Must be at least 6 chars"),e||t||n||a||c?(re(e,t,n,c,a),!1):(re(e,t,n,c,a),!0)};var se=function(e,t){f.collection("users").doc("".concat(e)).set(t).then((function(){console.log("Document successfully written!"),ne({type:"userLoggedIn",payload:t})})).catch((function(e){console.error("Error writing document: ",e)}))};return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(O.a,{}),Object(w.jsx)(xe.a,{className:t.container,position:"relative",align:"center",children:Object(w.jsxs)("form",{className:t.root,noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),ie()&&(console.log("validno e!"),x.setPersistence(v.auth.Auth.Persistence.LOCAL).then((function(){return x.createUserWithEmailAndPassword(o,u)})).then((function(){var e=x.currentUser,t="".concat(h[0]).concat(h.slice(1)," ").concat(C[0]).concat(C.slice(1)),n={uid:e.uid,name:t,email:o,aboutYou:"",age:I,collageOrUni:"",company:"",country:"",city:"",gender:"",jobTitle:"",images:[Se],mediaProfiles:[],sexualOrientation:"",youtubeSong:"",passions:[],chats:[],isOnline:!0,liked:[],disliked:[],matches:[]};se(e.uid,n),r(""),m(""),N(""),d(""),M("")})).catch((function(e){J(e.message)})))},children:[Object(w.jsxs)($.a,{variant:"outlined",children:[Object(w.jsx)(Ie,{id:"firstNameInput",autoFocus:!0,error:!!B,"aria-describedby":"firstName-reg-text-helper",value:h,onChange:function(e){return ce(e.target.value.trim(),"firstName")},label:"First name",variant:"outlined"}),!!B&&Object(w.jsx)(ve.a,{id:"firstName-reg-text-helper",children:B})]}),Object(w.jsxs)($.a,{variant:"outlined",children:[Object(w.jsx)(Ie,{id:"lastNameInput",autoFocus:!0,error:!!L,"aria-describedby":"lastName-reg-text-helper",onChange:function(e){return ce(e.target.value.trim(),"lastName")},label:"Last name",variant:"outlined"}),!!L&&Object(w.jsx)(ve.a,{id:"lastName-reg-text-helper",children:L})]}),Object(w.jsxs)($.a,{variant:"outlined",children:[Object(w.jsx)(Ie,{id:"email",autoFocus:!0,type:"email","aria-describedby":"email-reg-text-helper",error:!!G,value:o,onChange:function(e){return ce(e.target.value.trim(),"email")},label:"Email",variant:"outlined"}),!!G&&Object(w.jsx)(ve.a,{id:"email-reg-text-helper",children:G})]}),Object(w.jsxs)($.a,{variant:"outlined",children:[Object(w.jsx)(ae.a,{className:"label",style:{color:"rgb(225, 225, 225)"},htmlFor:"password",children:"Password"}),Object(w.jsx)(Me,{id:"password",error:!!Q,value:u,onChange:function(e){return ce(e.target.value,"password")},label:"Password",variant:"outlined",type:E?"text":"password",autoComplete:"current-password","aria-describedby":"password-reg-text-helper",endAdornment:Object(w.jsx)(ye.a,{position:"end",children:Object(w.jsx)(Ce.a,{"aria-label":"toggle password visibility",onClick:function(){_(!E)},onMouseDown:function(e){e.preventDefault()},edge:"end",children:E?Object(w.jsx)(we.a,{}):Object(w.jsx)(Ne.a,{})})})}),!!Q&&Object(w.jsx)(ve.a,{id:"password-reg-text-helper",children:Q})]}),Object(w.jsxs)($.a,{variant:"outlined",children:[Object(w.jsx)(Ie,{id:"age",error:!!ee,value:I,onChange:function(e){return ce(e.target.value,"age")},label:"How old are you?",variant:"outlined",type:"number","aria-describedby":"age-reg-text-helper"}),!!ee&&Object(w.jsx)(ve.a,{id:"age-reg-text-helper",children:ee})]}),Object(w.jsx)(z.a,{variant:"contained",color:"primary",type:"submit",disabled:!I||!o||!h||!C||u.length<1,children:"Register"}),Object(w.jsxs)(z.a,{variant:"contained",color:"primary",onClick:function(){var e=new v.auth.GoogleAuthProvider;x.signInWithPopup(e).then((function(e){console.log("logvane s google ",e),console.log("dokato zarejda dali e lognat");var t={uid:e.user.uid,name:e.user.displayName,email:e.user.email,aboutYou:"",age:18,collageOrUni:"",company:"",country:"",city:"",gender:"",jobTitle:"",images:[e.additionalUserInfo.profile.picture||Se],mediaProfiles:[],sexualOrientation:"",youtubeSong:"",passions:[],chats:[],isOnline:!0,liked:[],disliked:[],matches:[]};!function(e,t){var n=f.collection("users").doc(e);n.get().then((function(e){if(!e.exists)return console.log("nqma takyv potrebirel"),n.set(t).then((function(){console.log("Document successfully updated! // syzdadoh takyv potrebitel")})).catch((function(e){console.error("Error updating document: ",e)}));console.log("IVA VECHE takyv potrebirel, ne promenqm bazata"),ne({type:"userLoggedIn",payload:t})})).catch((function(e){console.log("Error getting document:",e)}))}(e.user.uid,t)})).catch((function(e){console.log(e.message)}))},children:[Object(w.jsx)("img",{className:t.googleIcon,src:"https://img.icons8.com/ios-filled/50/000000/google-logo.png",alt:"google icon"}),Object(w.jsx)("span",{children:" Continue with Google"})]})]})})]})}var Ae=Object(l.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),width:"30ch"},"& .MuiFormHelperText-contained":{color:"red",fontSize:"0.9rem",padding:0,borderRadius:"0"}},form:{minWidth:"300px",maxWidth:"400px"},container:{marginTop:"5rem",maxWidth:"500px",margin:"0 auto",display:"flex"}}})),Ee=Object(ee.a)({root:{"& label":{color:"rgb(225, 225, 225)"},"& label.Mui-focused":{color:"rgb(225, 225, 225)"},"& .MuiOutlinedInput-root":{color:"rgb(225, 225, 225)","& fieldset":{borderColor:"rgb(225, 225, 225)"},"&:hover fieldset":{borderColor:"rgb(225, 225, 225)"}}}})(ce.a),_e=Object(ee.a)({root:{"& span.MuiIconButton-label":{color:"rgb(225, 225, 225)"},"& input":{color:"rgb(225, 225, 225)"},"& fieldset":{border:"1px solid rgb(225, 225, 225)"},"&:hover fieldset":{border:"1px solid rgb(225, 225, 225) !important"},"&.MuiOutlinedInput-root.Mui-focused fieldset":{border:"2px solid rgb(225, 225, 225) !important"}}})(fe.a);function Fe(){var e=Ae(),t=Object(a.useState)(""),n=Object(i.a)(t,2),c=n[0],o=n[1],r=Object(a.useState)(""),s=Object(i.a)(r,2),l=s[0],u=s[1],d=Object(a.useState)(!1),j=Object(i.a)(d,2),b=j[0],h=j[1],m=Object(a.useState)(""),g=Object(i.a)(m,2),p=g[0],v=g[1],C=Object(a.useState)(!1),N=Object(i.a)(C,2),S=N[0],k=N[1],I=Object(y.b)();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(O.a,{}),Object(w.jsx)(xe.a,{className:e.container,position:"relative",align:"center",children:Object(w.jsxs)("form",{className:e.root,onSubmit:function(e){e.preventDefault(),function(){var e="",t=!1;return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(c)||(e="Email is badly formatted!"),l.length<6&&(t=!0),e||t?(v(e),k(t),!1):(v(e),k(t),!0)}()&&(console.log("validno e !"),x.setPersistence("session").then((function(){return x.signInWithEmailAndPassword(c,l)})).then((function(e){f.collection("users").doc(e.user.uid).get().then((function(e){console.log("=====>",e.data()),I({type:"userLoggedIn",payload:e.data()}),o(""),u("")}))})).catch((function(e){console.log(e.message),v(e.message)})))},noValidate:!0,autoComplete:"off",children:[Object(w.jsxs)($.a,{variant:"outlined",children:[Object(w.jsx)(Ee,{id:"email",fullWidth:!0,autoFocus:!0,error:!!p,"aria-describedby":"email-login-text-helper",onChange:function(e){o(e.target.value.trim())},label:"Email",variant:"outlined"}),!!p&&Object(w.jsx)(ve.a,{id:"email-login-text-helper",children:p})]}),Object(w.jsxs)($.a,{variant:"outlined",children:[Object(w.jsx)(ae.a,{className:"label",style:{color:"rgb(225, 225, 225)"},htmlFor:"password",children:"Password"}),Object(w.jsx)(_e,{id:"password",fullWidth:!0,"aria-describedby":"password-login-text-helper",error:!!S,value:l,onChange:function(e){u(e.target.value.trim())},label:"Password",variant:"outlined",type:b?"text":"password",autoComplete:"current-password",endAdornment:Object(w.jsx)(ye.a,{position:"end",children:Object(w.jsx)(Ce.a,{"aria-label":"toggle password visibility",onClick:function(){h(!b),console.log(b)},onMouseDown:function(e){e.preventDefault()},edge:"end",children:b?Object(w.jsx)(we.a,{}):Object(w.jsx)(Ne.a,{})})})}),!!S&&Object(w.jsx)(ve.a,{id:"password-login-text-helper",children:"Must be at least 6 chars!"})]}),Object(w.jsx)(z.a,{type:"submit",variant:"contained",color:"primary",children:"Login"})]})})]})}var Te=n(94),Be=(n(239),Object(l.a)({container:{width:"40vw",minWidth:"400px",alignItems:"center",textAlign:"center",color:"white"},name:{marginBottom:"3rem"},textField:{fontSize:"1.2rem",color:"rgb(225,225,225)",margin:"0 auto",width:"100%",padding:"0 3rem",textAlign:"center"}}));function Pe(){var e=Be(),t=Object(y.c)((function(e){return e.chosenProfile})),n=Object(a.useState)([]),c=Object(i.a)(n,2),o=c[0],r=c[1];return Object(a.useEffect)((function(){var e=t.images.filter((function(e){return""!==e}));r(e)}),[t]),Object(w.jsx)(O.a,{children:Object(w.jsxs)("div",{className:e.container,children:[Object(w.jsx)("h2",{className:e.name,children:null===t||void 0===t?void 0:t.name}),Object(w.jsx)(Te.a,{images:o,width:300,renderOverlay:function(){return Object(w.jsx)("div",{style:{fontSize:"2rem"},children:"Show"})},overlayBackgroundColor:"#e66465"}),Object(w.jsx)("h3",{children:"About me"}),Object(w.jsx)("div",{className:e.textField,children:null===t||void 0===t?void 0:t.aboutYou}),Object(w.jsx)("hr",{}),Object(w.jsx)("h3",{children:"Passions"}),Object(w.jsx)("div",{className:e.textField,children:null===t||void 0===t?void 0:t.passions.join(", ")}),Object(w.jsx)("hr",{}),Object(w.jsx)("h3",{children:"Gender"}),Object(w.jsx)("div",{className:e.textField,children:null===t||void 0===t?void 0:t.gender}),Object(w.jsx)("hr",{}),Object(w.jsx)("h3",{children:"Sexual orientation"}),Object(w.jsx)("div",{className:e.textField,children:null===t||void 0===t?void 0:t.sexualOrientation}),Object(w.jsx)("hr",{}),Object(w.jsx)("h3",{children:"Living in"}),Object(w.jsx)("div",{className:e.textField,children:null===t||void 0===t?void 0:t.country}),Object(w.jsx)("hr",{}),Object(w.jsx)("h3",{children:"Job title"}),Object(w.jsx)("div",{className:e.textField,children:null===t||void 0===t?void 0:t.jobTitle}),Object(w.jsx)("hr",{}),Object(w.jsx)("h3",{children:"Company"}),Object(w.jsx)("div",{className:e.textField,children:null===t||void 0===t?void 0:t.company}),Object(w.jsx)("hr",{}),Object(w.jsx)("h3",{children:"College"}),Object(w.jsx)("div",{className:e.textField,children:null===t||void 0===t?void 0:t.collageOrUni})]})})}var Re=Object(l.a)({container:{width:"40vw",alignItems:"center",textAlign:"center",color:"white"},name:{marginBottom:"3rem"},textField:{fontSize:"1.2rem",color:"rgb(225,225,225)",margin:"0 auto",width:"100%",padding:"0 5rem",textAlign:"center"}});function De(){var e=Re(),t=Object(y.c)((function(e){return e.chosenProfile})),n=Object(a.useState)([]),c=Object(i.a)(n,2),o=c[0],r=c[1];return Object(a.useEffect)((function(){var e=null===t||void 0===t?void 0:t.images.filter((function(e){return""!==e}));r(e)}),[t]),Object(w.jsx)(O.a,{children:Object(w.jsxs)("div",{className:e.container,children:[Object(w.jsx)("h2",{className:e.name,children:null===t||void 0===t?void 0:t.name}),Object(w.jsx)(Te.a,{images:o,width:300,renderOverlay:function(){return Object(w.jsx)("div",{style:{fontSize:"2rem"},children:"Show"})},overlayBackgroundColor:"tomato"}),Object(w.jsx)("h3",{children:"About me"}),Object(w.jsx)("div",{className:e.textField,children:null===t||void 0===t?void 0:t.aboutYou}),Object(w.jsx)("hr",{}),Object(w.jsx)("h3",{children:"Passions"}),Object(w.jsx)("div",{className:e.textField,children:null===t||void 0===t?void 0:t.passions.join(", ")}),Object(w.jsx)("hr",{}),Object(w.jsx)("h3",{children:"Gender"}),Object(w.jsx)("div",{className:e.textField,children:null===t||void 0===t?void 0:t.gender}),Object(w.jsx)("hr",{}),Object(w.jsx)("h3",{children:"Sexual orientation"}),Object(w.jsx)("div",{className:e.textField,children:null===t||void 0===t?void 0:t.sexualOrientation}),Object(w.jsx)("hr",{}),Object(w.jsx)("h3",{children:"Living in"}),Object(w.jsx)("div",{className:e.textField,children:null===t||void 0===t?void 0:t.country}),Object(w.jsx)("hr",{}),Object(w.jsx)("h3",{children:"Job title"}),Object(w.jsx)("div",{className:e.textField,children:null===t||void 0===t?void 0:t.jobTitle}),Object(w.jsx)("hr",{}),Object(w.jsx)("h3",{children:"Company"}),Object(w.jsx)("div",{className:e.textField,children:null===t||void 0===t?void 0:t.company}),Object(w.jsx)("hr",{}),Object(w.jsx)("h3",{children:"College"}),Object(w.jsx)("div",{className:e.textField,children:null===t||void 0===t?void 0:t.collageOrUni})]})})}var Le=n(147),ze=n.n(Le),We=Object(l.a)((function(e){return{flexColumn:{display:"flex",flexDirection:"column",width:"100%",justifyContent:"center",alignItems:"center",color:"white"},title:{fontSize:"2rem",width:"max-content"},container:{width:"60%",position:"relative",display:"flex",justifyContent:"center",alignItems:"center",marginTop:"1rem","& a":{textDecoration:"none"}},item:{margin:"".concat(e.spacing(2),"px"),"&:hover":{boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)"}},root:{position:"relative",backgroundColor:"rgba(255, 255, 255, 0.4)",width:250,height:350,margin:"13px",display:"flex",flexDirection:"column",justifyContent:"space-between"},expanded:{height:"auto",position:"fixed",top:"135px",left:"5%",zIndex:2},media:{height:240},colorBlack:{color:"black"},btnContainer:{marginBottom:"2rem"}}}));function Ye(){var e=We(),t=Object(y.c)((function(e){return e.alreadyRemoved})),n=Object(a.useState)(-1),c=Object(i.a)(n,2),o=c[0],r=c[1],s=Object(y.c)((function(e){return e.currentUser})),l=Object(a.useState)([]),u=Object(i.a)(l,2),d=u[0],j=u[1],b=Object(y.c)((function(e){return e.allUsers})),h=Object(a.useState)(!0),O=Object(i.a)(h,2),p=(O[0],O[1]),x=Object(y.b)();Object(a.useEffect)((function(){var e=b.filter((function(e){return s.matches.includes(e.uid)}));j(e)}),[s]),Object(a.useEffect)((function(){(null===d||void 0===d?void 0:d.length)>0&&p(!1)}),[d]);var v=function(e){var n=t.filter((function(t){return t!==e}));x({type:"setRemoved",payload:n});var a=s.matches.filter((function(t){return t!==e})),c=s.liked.filter((function(t){return t!==e})),o=b.find((function(t){return t.uid===e})).matches.filter((function(e){return e!==s.uid}));f.collection("users").doc(s.uid).update({matches:Object(M.a)(a),liked:Object(M.a)(c)}).then((function(){x({type:"userRemovedFromLiked",payload:c}),x({type:"userRemovedFromMatches",payload:a})})).catch((function(e){return console.log("Error after updating db for currentUser: ",e)})),f.collection("users").doc(e).update({matches:Object(M.a)(o)}).then((function(){var t=Object(M.a)(b);t=t.map((function(t){return t.uid===e&&(t.matches=o),t})),x({type:"getAllUsers",payload:t});var n=d.filter((function(t){return t.uid!==e}));j(n)})).catch((function(e){return console.log("Error after updating db for currentUser: ",e)})),function(e,t){var n=e>t?"".concat(t,"_").concat(e):"".concat(e,"_").concat(t);f.collection("chatRooms").doc(n).delete().then((function(){return console.log("Successfully deleted the chatRoom for users: ",t,e)})).catch((function(e){return console.log("Error on chatRoom deleting: ",e)}))}(e,s.uid)};return Object(w.jsxs)("div",{className:e.flexColumn,children:[0===d.length?Object(w.jsx)("h2",{children:"You don't have any matches yet!"}):Object(w.jsx)(W.a,{className:e.title,children:"Your matches"}),Object(w.jsx)(g.a,{container:!0,className:e.container,children:d.map((function(t){var n;return Object(w.jsxs)(B.a,{elevation:20,className:o===t.uid?"".concat(e.root," ").concat(e.expanded):e.root,onClick:function(){return function(e){x({type:"setChosenProfile",payload:e}),window.localStorage.setItem("chosenProfile",JSON.stringify(e))}(t)},children:[Object(w.jsxs)(P.a,{component:m.b,to:"/matches/"+t.uid,children:[Object(w.jsx)(L.a,{className:e.media,image:t.images&&t.images[0]||"https://t4.ftcdn.net/jpg/00/64/67/63/360_F_64676383_LdbmhiNM6Ypzb3FM4PPuFP9rHe7ri8Ju.jpg",title:t.name}),Object(w.jsxs)(D.a,{children:[Object(w.jsxs)(W.a,{className:e.colorBlack,gutterBottom:!0,variant:"h5",component:"h2",children:[t.name," - ",t.age]}),Object(w.jsx)(W.a,{variant:"body2",color:"textSecondary",component:"p",children:t.aboutYou?t.aboutYou:"From ".concat(null===(n=t.country)||void 0===n?void 0:n.split(" ")[1])})]})]}),Object(w.jsx)(R.a,{className:e.btnContainer,children:Object(w.jsx)(z.a,{size:"small",color:"primary",onClick:function(){return v(t.uid)},children:"Remove match"})}),Object(w.jsx)(z.a,{className:ze.a.btnStyle,onClick:function(){return e=t.uid,void r(o===e?"":e);var e},children:o===t.uid?"Show less":"Show more"})]},t.uid)}))})]})}var Ve=n(149),Ge=n.n(Ve),Je=n(41),He=n.n(Je),Ze=n(148),Qe=n.n(Ze),$e=n(310),Ke=Object(l.a)((function(e){return{head:{width:e.spacing(4),height:e.spacing(4),margin:e.spacing(1)},timestamp:{color:"gray",fontSize:"8px"},active:{background:"rgba(255, 255, 255, 0.4)",borderRadius:"2rem 0 0 2rem"},missed:{border:"2px solid #e66465"}}}));function Xe(e){var t=e.selectTargetChat,n=e.chat,c=e.isActive,o=Ke(),r=Object(y.c)((function(e){return e.allUsers})),s=Object(y.c)((function(e){return e.currentUser.uid})),l=n.id.split("_").filter((function(e){return e!==s})).join(""),u=r.find((function(e){return e.uid===l})),d=Object(a.useState)(n),j=Object(i.a)(d,2),b=j[0],h=j[1],m=Object(a.useState)(!1),g=Object(i.a)(m,2),O=g[0],p=g[1];Object(a.useEffect)((function(){if(n.messages.length>0){var e=n.messages[n.messages.length-1].sender;b.messages.length===n.messages.length||e===s||c||(p(!0),h(n)),c&&p(!1)}}),[n,c,b.messages.length]);return Object(w.jsxs)("span",{style:O?{borderRight:"3px solid #e66465"}:{},className:c?o.active:"",onClick:function(){t(n.id,u)},children:[Object(w.jsx)($e.a,{className:o.head,alt:u.name,src:u.images[0]}),u.name]},u.id)}var qe=Object(l.a)((function(e){return{head:{width:e.spacing(4),height:e.spacing(4),margin:e.spacing(1)},timestamp:{color:"gray",fontSize:"8px"}}}));function et(e){var t,n=e.message,a=qe(),c=Object(y.c)((function(e){return e.allUsers})),o=Object(y.c)((function(e){return e.currentUser})),r=n.sender===o.uid?"sent":"received",i=null===(t=c.find((function(e){return e.uid===n.sender})))||void 0===t?void 0:t.images[0];return Object(w.jsxs)("div",{className:["".concat(He.a.message," ").concat(He.a[r])],children:[Object(w.jsx)($e.a,{className:a.head,alt:n.sender,src:i}),Object(w.jsx)("p",{children:n.message}),Object(w.jsx)("span",{children:new Date(n.createdAt).toDateString()})]})}function tt(){var e=Object(y.c)((function(e){return e.currentUser})),t=(Object(y.c)((function(e){return e.allUsers})),Object(a.useState)("")),n=Object(i.a)(t,2),c=n[0],o=n[1],r=Object(a.useState)([]),s=Object(i.a)(r,2),l=s[0],u=s[1],d=Object(a.useState)(""),j=Object(i.a)(d,2),b=j[0],h=j[1],m=Object(a.useState)(""),g=Object(i.a)(m,2),p=g[0],x=g[1],C=Object(a.useRef)(),N=f.collection("chatRooms").where("users","array-contains",e.uid);Object(a.useEffect)((function(){N.onSnapshot((function(e){var t=[];e.forEach((function(e){var n=e.data(),a=Object(k.a)(Object(k.a)({},n),{},{id:e.id});0!==a.messages.length?t.unshift(a):t.push(a)}));var n=t.sort((function(e,t){return t.lastMessageTimestamp-e.lastMessageTimestamp}));u(n)}))}),[]),Object(a.useEffect)((function(){C.current.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}),[l,C,b]);var S=function(){var t=Object(ie.a)(re.a.mark((function t(n){return re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,a=b,r=e.uid,i=c,void f.collection("chatRooms").doc(a).update({messages:v.firestore.FieldValue.arrayUnion({message:i,sender:r,createdAt:Date.now()}),lastMessageTimestamp:Date.now()});case 3:console.log("izpratih ei tui: ",c,"v chata: ",b,"ot: ",e.uid),o(""),C.current.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"});case 6:case"end":return t.stop()}var a,r,i}),t)})));return function(e){return t.apply(this,arguments)}}(),I=function(e,t){h(e),x(t.name)},M=Object(a.useMemo)((function(){var e=l.findIndex((function(e){return e.id===b}));return l[e]}),[b,l]);return Object(w.jsx)(O.a,{children:Object(w.jsxs)("div",{className:He.a.chatContainer,children:[Object(w.jsx)("div",{className:He.a.profilesInChat,children:Object(w.jsx)("div",{className:He.a.innerDivChat,children:l.length>0&&l.map((function(e){return Object(w.jsx)(Xe,{chat:e,isActive:b===e.id,selectTargetChat:I},e.id)}))})}),Object(w.jsxs)("main",{className:He.a.chat,children:[Object(w.jsxs)("div",{className:He.a.messageContainer,children:[M&&M.messages.map((function(e){return Object(w.jsx)(et,{message:e},e.createdAt)})),Object(w.jsx)("div",{ref:C})]}),Object(w.jsxs)("form",{className:He.a.chatForm,onSubmit:S,children:[Object(w.jsx)("input",{value:c,onChange:function(e){return o(e.target.value)},placeholder:M?"Chat with ".concat(p):""}),Object(w.jsx)("button",{type:"submit",disabled:!M||!c,children:Object(w.jsx)(Qe.a,{})})]})]})]})})}var nt=Object(l.a)((function(e){return{paper:{position:"fixed !important",bottom:"50px",right:"50px",color:"rgb(136, 25, 163)",backgroundColor:"rgba(255,255,255,0.5)","& .MuiFab-root:hover":{backgroundColor:"#e66465","& .MuiSvgIcon-root":{color:"rgb(225,225,225)",zIndex:2}},zIndex:2},smallBtn:{position:"absolute",width:"50px",height:"50px","& .MuiSvgIcon-root":{width:"30px"},color:"#e66465",background:"rgb(225,225,225)"}}}));var at=function(){var e=Object(y.b)(),t=nt(),n=Object(a.useState)(!1),c=Object(i.a)(n,2),o=c[0],r=c[1],l=Object(a.useState)(!0),u=Object(i.a)(l,2),d=u[0],j=u[1],b=Object(y.c)((function(e){return e.currentUser}));return Object(a.useEffect)((function(){x.onAuthStateChanged((function(t){t?f.collection("users").doc(t.uid).get().then((function(t){e({type:"userLoggedIn",payload:t.data()}),console.log("Dispatchnahme currentUser: ",t.data())})):e({type:"userLoggedOut"})}))}),[]),Object(a.useEffect)((function(){b.uid&&(console.log("User ID na currentUser: ",b.uid),f.collection("users").onSnapshot((function(t){var n=[];t.forEach((function(e){e.uid!==b.uid&&n.push(e.data())})),e({type:"getAllUsers",payload:n}),console.log("Dispatchnahme tezi useri: ",n),j(!1)})))}),[b.uid]),Object(a.useEffect)((function(){var t=JSON.parse(window.localStorage.getItem("chosenProfile"));e({type:"setChosenProfile",payload:t})}),[]),d?Object(w.jsx)("div",{style:{margin:"calc(50vh - 100px) auto"},children:Object(w.jsx)(be.a,{size:100})}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(O.a,{}),Object(w.jsx)("header",{children:Object(w.jsx)(S,{user:b})}),Object(w.jsx)("main",{className:"App",children:Object(w.jsxs)(s.d,{children:[Object(w.jsx)(s.b,{exact:!0,path:"/",children:b.uid?Object(w.jsx)(q,{}):Object(w.jsx)(s.a,{to:"/login"})}),Object(w.jsx)(s.b,{path:"/chosenProfile/:id",children:b.uid?Object(w.jsx)(De,{}):Object(w.jsx)(s.a,{to:"/register"})}),Object(w.jsx)(s.b,{exact:!0,path:"/login",children:b.uid?Object(w.jsx)("div",{children:Object(w.jsx)(s.a,{to:"/"})}):Object(w.jsx)(Fe,{})}),Object(w.jsx)(s.b,{exact:!0,path:"/register",children:b.uid?Object(w.jsx)("div",{children:Object(w.jsx)(s.a,{to:"/"})}):Object(w.jsx)(Ue,{})}),b.uid?Object(w.jsx)(s.b,{exact:!0,path:"/matches",children:Object(w.jsx)(Ye,{})}):Object(w.jsx)(s.a,{to:"/register"}),b.uid?Object(w.jsx)(s.b,{path:"/matches/:id",children:Object(w.jsx)(Pe,{})}):Object(w.jsx)(s.a,{to:"/register"}),Object(w.jsx)(s.b,{exact:!0,path:"/profile",children:b.uid?Object(w.jsx)(pe,{}):Object(w.jsx)(s.a,{to:"/profile"})}),Object(w.jsx)(s.b,{path:"*",children:Object(w.jsx)(s.a,{to:"/"})})]})}),b.uid&&o&&Object(w.jsx)(tt,{}),b.uid&&Object(w.jsx)(te.a,{className:t.paper,children:Object(w.jsx)(se.a,{title:o?"Close Chat":"Open Chat",className:t.tooltip,arrow:!0,TransitionComponent:le.a,placement:"top",children:Object(w.jsx)(ue.a,{component:"span",className:t.smallBtn,children:Object(w.jsx)(Ge.a,{fontSize:"large",onClick:function(){r(!o)}})})})})]})},ct=(n(240),n(69)),ot=[],rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"addToRemoved":return[].concat(Object(M.a)(e),[t.payload]);case"setRemoved":return t.payload;default:return e}},it={uid:"",name:"",email:"",aboutYou:"",age:null,collageOrUni:"",company:"",country:"",city:"",gender:"",jobTitle:"",images:[],mediaProfiles:[],sexualOrientation:"",youtubeSong:"",passions:[],chats:[],isOnline:!1,liked:[],disliked:[],matches:[]},st=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"userLoggedIn":return Object(k.a)({},t.payload);case"userLoggedOut":return it;case"userChangedProfilePic":return Object(k.a)(Object(k.a)({},e),{},{images:t.payload});case"userChangedAboutYou":return Object(k.a)(Object(k.a)({},e),{},{aboutYou:t.payload});case"userChangedGender":return Object(k.a)(Object(k.a)({},e),{},{gender:t.payload});case"userChangedLivingIn":return Object(k.a)(Object(k.a)({},e),{},{country:t.payload});case"userChangedPassions":return Object(k.a)(Object(k.a)({},e),{},{passions:t.payload});case"userChangedOrientation":return Object(k.a)(Object(k.a)({},e),{},{sexualOrientation:t.payload});case"userChangedJobTitle":return Object(k.a)(Object(k.a)({},e),{},{jobTitle:t.payload});case"userChangedCompany":return Object(k.a)(Object(k.a)({},e),{},{company:t.payload});case"userChangedCollegeOrUni":return Object(k.a)(Object(k.a)({},e),{},{collageOrUni:t.payload});case"userAddedToLiked":return Object(k.a)(Object(k.a)({},e),{},{liked:[].concat(Object(M.a)(e.liked),[t.payload])});case"userRemovedFromLiked":return Object(k.a)(Object(k.a)({},e),{},{liked:t.payload});case"userAddedToDisliked":return Object(k.a)(Object(k.a)({},e),{},{disliked:[].concat(Object(M.a)(e.disliked),[t.payload])});case"userAddedToMatches":return Object(k.a)(Object(k.a)({},e),{},{matches:[].concat(Object(M.a)(e.matches),[t.payload])});case"userRemovedFromMatches":return Object(k.a)(Object(k.a)({},e),{},{matches:t.payload});default:return e}},lt=[],ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"getAllUsers":return Object(M.a)(t.payload);default:return e}},dt={uid:"",name:"",email:"",aboutYou:"",age:null,collageOrUni:"",company:"",country:"",city:"",gender:"",jobTitle:"",images:[],mediaProfiles:[],sexualOrientation:"",youtubeSong:"",passions:[],chats:[],isOnline:!1,liked:[],disliked:[],matches:[]},jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setChosenProfile":return t.payload;default:return e}},bt=Object(ct.b)({currentUser:st,allUsers:ut,alreadyRemoved:rt,chosenProfile:jt}),ht=Object(ct.d)(bt,Object(ct.c)(window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));r.a.render(Object(w.jsx)(y.a,{store:ht,children:Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(m.a,{children:Object(w.jsx)(O.a,{children:Object(w.jsx)(at,{})})})})}),document.getElementById("root"))},41:function(e,t,n){e.exports={chatContainer:"Chat_chatContainer__EIVcp",profilesInChat:"Chat_profilesInChat__1b0GJ",innerDivChat:"Chat_innerDivChat__1tiQw",missedMsg:"Chat_missedMsg__2RkTA",chat:"Chat_chat__2m_BP",messageContainer:"Chat_messageContainer__1EKLz",chatForm:"Chat_chatForm__3DKZ9","sign-in":"Chat_sign-in__3iGNs",message:"Chat_message__Y278M",sent:"Chat_sent__3suxQ",received:"Chat_received__vZeoR",heads:"Chat_heads___BcZl"}}},[[241,1,2]]]);
//# sourceMappingURL=main.0d6e1173.chunk.js.map