(this["webpackJsonptinder-project"]=this["webpackJsonptinder-project"]||[]).push([[0],{147:function(e,t,n){e.exports={btnStyle:"Matches_btnStyle__2XK7F"}},185:function(e,t,n){},197:function(e,t,n){},239:function(e,t,n){},241:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(17),r=n.n(o),i=n(10),s=(n(185),n(25)),l=n(280),u=n(285),d=n(134),j=n.n(d),b=n(306),h=n(150),m=n(152),g=n(32),O=n(286),p=n(283),f=n(74);f.a.initializeApp({apiKey:"AIzaSyBTxAOZJx56d3i9hCiD5ZcYpnp4cvfady4",authDomain:"fir-project-d9b09.firebaseapp.com",projectId:"fir-project-d9b09",storageBucket:"fir-project-d9b09.appspot.com",messagingSenderId:"74333153272",appId:"1:74333153272:web:ebfbec43f8b31327d1980d"});var x=f.a.firestore(),v=(f.a.storage(),f.a.auth()),y=f.a,C=n(15),w=n.p+"static/media/dinderTrans2.19d7ad87.png",N=n(1),S=Object(l.a)((function(e){return{root:{flexGrow:1,width:"100%",marginTop:"50px",fontFamily:"Nunito"},logoPaper:{margin:"".concat(e.spacing(1),"px auto"),background:"rgba(255,255,255,0.3)",padding:"0 10px"},logo:{width:"100px"},appBar:{zIndex:"1",background:"none",padding:"0 ".concat(e.spacing(3),"px")},title:{fontSize:"3rem"},menuIcon:{fontSize:"35px"},"& ul":{padding:"40 !important"},linkMenuItem:{textDecoration:"none !important","&:focus":{outline:"none !important"}},menu:{"& div ul.MuiList-padding":{}}}}));function k(){var e=S(),t=c.a.useState(null),n=Object(i.a)(t,2),a=n[0],o=n[1],r=(Boolean(a),Object(C.b)()),s=Object(C.c)((function(e){return e.currentUser}));return Object(N.jsxs)("div",{className:e.root,children:[Object(N.jsx)(p.a,{}),Object(N.jsx)(u.a,{elevation:0,className:e.appBar,children:Object(N.jsxs)(O.a,{container:!0,justify:"space-between",alignItems:"center",children:[Object(N.jsx)(O.a,{item:!0,xs:1,children:Object(N.jsx)(m.a,{className:e.logoPaper,elevation:10,children:Object(N.jsx)("img",{src:w,className:e.logo,alt:"logo"})})}),Object(N.jsxs)(O.a,{children:[Object(N.jsx)(j.a,{className:e.menuIcon,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){o(e.currentTarget)}}),Object(N.jsxs)(h.a,{id:"simple-menu",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:function(){o(null)},className:e.menu,children:[Object(N.jsx)(b.a,{component:g.b,className:e.linkMenuItem,to:"/",children:"Home"}),s.uid?Object(N.jsxs)("div",{children:[Object(N.jsx)(b.a,{component:g.b,className:e.linkMenuItem,to:"/matches",children:"Matches"}),Object(N.jsx)(b.a,{component:g.b,className:e.linkMenuItem,to:"/profile",children:"Profile"}),Object(N.jsx)(b.a,{component:g.b,className:e.linkMenuItem,to:"/",onClick:function(){v.signOut().then(r({type:"userLoggedOut"})).catch((function(e){return console.log(e.message)}))},children:"Logout"})]}):Object(N.jsxs)("div",{children:[Object(N.jsx)(b.a,{component:g.b,className:e.linkMenuItem,to:"/register",children:"Register"}),Object(N.jsx)(b.a,{component:g.b,className:e.linkMenuItem,to:"/login",children:"Login"})]})]})]})]})})]})}var I=n(16),M=n(73),A=n(28),U=n(135),F=n.n(U),E=(n(197),n(137)),_=n.n(E),T=n(136),P=n.n(T),B=n(292),R=n(293),L=n(296),z=n(295),D=n(294),W=n(291),Y=n(153),V=n(307),G=Object(l.a)({root:{height:200}});function J(e){return"Age range: ".concat(e)}function H(e){var t=e.lowestAge,n=e.highestAge,c=e.setAgeRange,o=G(),r=Object(a.useState)([t,n]),s=Object(i.a)(r,2),l=s[0],u=s[1];return Object(N.jsxs)("div",{className:o.root,children:[Object(N.jsx)(Y.a,{id:"range-slider",gutterBottom:!0,children:J(l).replace(","," - ")}),Object(N.jsx)(V.a,{style:{color:"white"},orientation:"vertical",min:t,max:n,value:l,onChange:function(e,t){u(t)},valueLabelDisplay:"auto","aria-labelledby":"range-slider",getAriaValueText:function(){return J},onChangeCommitted:function(){return c(l)}})]})}var X=n(305),Z=n(308),K=n(289),Q=n(243),$=n(244);function q(e){var t=e.setGenderValue,n=(Object(l.a)({root:{"& legend":{color:"white"}}}),c.a.useState("all")),a=Object(i.a)(n,2),o=a[0],r=a[1];return Object(N.jsxs)(Q.a,{component:"fieldset",children:[Object(N.jsx)($.a,{component:"legend",children:"Gender"}),Object(N.jsxs)(Z.a,{display:"flex","aria-label":"gender",name:"gender1",value:o,onChange:function(e){r(e.target.value),t(e.target.value)},children:[Object(N.jsx)(K.a,{value:"female",control:Object(N.jsx)(X.a,{color:"secondary"}),label:"Female"}),Object(N.jsx)(K.a,{value:"male",control:Object(N.jsx)(X.a,{color:"primary"}),label:"Male"}),Object(N.jsx)(K.a,{value:"other",control:Object(N.jsx)(X.a,{color:"default"}),label:"Other"}),Object(N.jsx)(K.a,{value:"all",control:Object(N.jsx)(X.a,{color:"default"}),label:"All"})]})]})}Object(l.a)({root:{width:300}});function ee(){var e=Object(C.b)(),t=Object(C.c)((function(e){return e.alreadyRemoved})),n=Object(C.c)((function(e){return e.currentUser})),o=Object(C.c)((function(e){return e.allUsers})),r=Object(a.useState)([]),s=Object(i.a)(r,2),l=s[0],u=s[1],d=Object(a.useState)(),j=Object(i.a)(d,2),b=j[0],h=j[1],m=Object(a.useState)(!0),O=Object(i.a)(m,2),p=O[0],f=O[1],v=Object(a.useMemo)((function(){return Array(l.length).fill(0).map((function(e){return c.a.createRef()}))}),[l.length]),w=o.map((function(e){return+e.age})).sort((function(e,t){return e-t})).filter((function(e){return!isNaN(e)}))[0],S=o.map((function(e){return+e.age})).sort((function(e,t){return t-e})).filter((function(e){return!isNaN(e)}))[0],k=Object(a.useState)([w,S]),U=Object(i.a)(k,2),E=U[0],T=U[1],V=Object(a.useState)("all"),G=Object(i.a)(V,2),J=G[0],X=G[1];function Z(e,t){return e.filter((function(e){return!t.liked.includes(e.uid)&&!t.disliked.includes(e.uid)&&!t.matches.includes(e.uid)&&t.uid!==e.uid}))}Object(a.useEffect)((function(){if("all"===J){var e=o.filter((function(e){return e.age>=E[0]&&e.age<=E[1]}));u(e)}else{var t=o.filter((function(e){return e.age>=E[0]&&e.age<=E[1]&&e.gender===J}));u(t)}}),[E,J]),Object(a.useEffect)((function(){var e=Z(o,n);u(e)}),[]);var K=function(e){console.log(e+" left the screen!!@#@!$!%@!$%#@^&#%&*@!$&^")},Q=function(e,t){x.collection("users").doc(e).update({matches:y.firestore.FieldValue.arrayUnion(t)}),function(e,t){var n=e>t?"".concat(t,"_").concat(e):"".concat(e,"_").concat(t);x.collection("chatRooms").doc(n).set({messages:[],users:[e,t],isTyping:!1}).then((function(){return console.log("Successfully created chatRoom with users: ",[e,t])})).catch((function(e){return console.log("Error on chatRoom creation: ",e.message)}))}(e,t),x.collection("users").doc(t).update({matches:y.firestore.FieldValue.arrayUnion(e)}).then((function(){$("getAllUsers",o.map((function(n){return n.uid===t&&(n.matches=[].concat(Object(A.a)(n.matches),[e])),n}))),$("userAddedToMatches",t)}))};function $(t,n){e({type:t,payload:n})}var ee=function(e,t){console.log("arrProp",e),"Matches"!==e&&x.collection("users").doc(n.uid).update(Object(M.a)({},e.toLowerCase(),y.firestore.FieldValue.arrayUnion(t))).then((function(){$("userAddedTo".concat(e),t)})).catch((function(e){console.error("Error updating document: ",e)})),K(t),"Liked"===e&&x.collection("users").doc(t).get().then((function(e){e.data().liked.includes(n.uid)&&Q(n.uid,t)})),"Matches"===e&&Q(n.uid,t)},te=function(e){var n=l.filter((function(e){return!t.includes(e.uid)}));if(n.length){var a=n[n.length-1].uid,c=l.map((function(e){return e.uid})).indexOf(a);v[c].current.swipe(e)}},ne=function(e,t){x.collection("users").doc(n.uid).update(Object(M.a)({},e.toLowerCase(),[].concat(Object(A.a)(n[e.toLowerCase()]),[t]))).then((function(){$("userLoggedIn",Object(I.a)(Object(I.a)({},n),{},Object(M.a)({},e.toLowerCase(),[].concat(Object(A.a)(n[e.toLowerCase()]),[t]))))})).catch((function(e){console.error("Error updating document: ",e)})),"Liked"===e&&x.collection("users").doc(t).get().then((function(e){e.data().liked.includes(n.uid)&&Q(n.uid,t)})),"Matches"===e&&x.collection("users").doc(t).get().then((function(){Q(n.uid,t)}));var a=Z(o,n).filter((function(e){return e.uid!==t}));u(a)},ae=function(){var e=Z(o,n).filter((function(e){return!t.includes(e)}));u(e),f(!p)};return Object(N.jsxs)("div",{style:{minWidth:"450px",color:"white"},children:[Object(N.jsx)(W.a,{onClick:function(){n.matches.forEach((function(e){x.collection("users").doc(e).get().then((function(t){var a=t.data().matches.filter((function(e){return e!==n.uid}));x.collection("users").doc(e).update({matches:a})}))})),x.collection("users").doc(n.uid).update({liked:[],disliked:[],matches:[]}).then((function(){e({type:"userLoggedIn",payload:Object(I.a)(Object(I.a)({},n),{},{liked:[],disliked:[],matches:[]})}),console.log("Successfully reset currentUser: ",n)})),x.collection("chatRooms").get().then((function(e){return e.forEach((function(e){e.id.includes(n.uid)&&x.collection("chatRooms").doc(e.id).delete().then((function(){return console.log("Successfully deleted the chatRooms for user: ",n)}))}))}))},variant:"contained",className:"resetButton",children:"Reset currentUser"}),Object(N.jsx)(W.a,{onClick:function(){x.collection("users").get().then((function(e){return e.forEach((function(e){e.ref.update({liked:[],disliked:[],matches:[]})}))})).then((function(){e({type:"getAllUsers",payload:o.map((function(e){return e.matches=[]}))}),u(o)}));var t=x.collection("chatRooms");t.get().then((function(e){return e.forEach((function(e){return t.doc(e.id).delete()}))}))},variant:"contained",className:"resetButton",children:"Reset all users"}),p?Object(N.jsxs)("div",{style:{width:"85%",margin:"0 auto",zIndex:"2"},children:[Object(N.jsx)(P.a,{onClick:ae,fontSize:"large",style:{marginTop:"20px"}}),Object(N.jsx)("link",{href:"https://fonts.googleapis.com/css?family=Damion&display=swap",rel:"stylesheet"}),Object(N.jsx)("link",{href:"https://fonts.googleapis.com/css?family=Alatsi&display=swap",rel:"stylesheet"}),Object(N.jsx)("h1",{className:"homeTitle",children:"React Tinder Card"}),Object(N.jsx)("div",{className:"cardContainer",children:l.map((function(t,n){return Object(N.jsx)(F.a,{ref:v[n],className:"swipe",onSwipe:function(n){!function(t,n){var a="";switch(t){case"left":a="Disliked";break;case"right":a="Liked";break;case"up":a="Matches";break;case"down":a="Disliked"}ee(a,n),h(t),e({type:"addToRemoved",payload:n})}(n,t.uid,t.name)},onCardLeftScreen:function(){return K(t.uid)},children:Object(N.jsx)("div",{style:{backgroundImage:"url("+(t.images[0]||"https://firebasestorage.googleapis.com/v0/b/fir-project-d9b09.appspot.com/o/profilePics%2Fdefault-profile-pic.jpg?alt=media&token=12bd0268-84bd-47ee-9bf7-5ca4269f87d5")+")"},className:"card",children:Object(N.jsx)("h3",{children:t.name})})},t.uid)}))}),Object(N.jsxs)("div",{className:"buttons",children:[Object(N.jsx)("button",{onClick:function(){return te("left")},children:"Swipe left!"}),Object(N.jsx)("button",{onClick:function(){return te("right")},children:"Swipe right!"})]}),b?Object(N.jsxs)("h3",{className:"infoText",children:["You swiped ",b]},b):Object(N.jsx)("h3",{className:"infoText",children:"Swipe a card or press a button to get started!"})]}):Object(N.jsxs)("div",{children:[Object(N.jsxs)("div",{className:"filtersContainer",children:[Object(N.jsx)(q,{setGenderValue:X}),Object(N.jsx)(H,{lowestAge:w,highestAge:S,setAgeRange:T})]}),Object(N.jsx)(_.a,{onClick:ae,fontSize:"large",style:{marginTop:"20px",zIndex:"2"}}),Object(N.jsx)("div",{className:"cardViewWrapper",children:Object(N.jsx)("div",{className:"containerCardView",children:l.map((function(t){return Object(N.jsxs)(B.a,{elevation:20,className:"root",onClick:function(){return function(t){e({type:"setChosenProfile",payload:t}),window.localStorage.setItem("chosenProfile",JSON.stringify(t))}(t)},children:[Object(N.jsxs)(R.a,{component:g.b,to:"/chosenProfile/"+t.uid,children:[Object(N.jsx)(D.a,{className:"media",image:t.images[0]||"https://firebasestorage.googleapis.com/v0/b/fir-project-d9b09.appspot.com/o/profilePics%2Fdefault-profile-pic.jpg?alt=media&token=12bd0268-84bd-47ee-9bf7-5ca4269f87d5",title:t.name}),Object(N.jsx)(z.a,{children:Object(N.jsxs)(Y.a,{className:"colorBlack",gutterBottom:!0,variant:"h5",component:"h2",children:[t.name.split(" ")[0]," ",t.age]})})]}),Object(N.jsxs)(L.a,{className:"btnContainer",children:[Object(N.jsx)(W.a,{size:"small",color:"primary",onClick:function(){return ne("Disliked",t.uid)},children:"Dislike"}),Object(N.jsx)(W.a,{size:"small",color:"primary",onClick:function(){return ne("Liked",t.uid)},children:"Like"})]})]},t.uid)}))})})]})]})}var te=n(8),ne=n(250),ae=n(247),ce=n(300),oe=n(57),re=n.n(oe),ie=n(93),se=n(309),le=n(298),ue=n(299),de=n(139),je=n.n(de),be=n(297),he=Object(l.a)((function(e){return{paper:{position:"relative",height:"200px",width:"130px",margin:"13px 13px",backgroundColor:"rgba(255,255,255,0.5)","& .MuiFab-root:hover":{backgroundColor:"#e66465","& .MuiSvgIcon-root":{color:"rgb(225,225,225)"}},"& input":{display:"none"}},divImg:{height:"100%",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",display:"flex",justifyContent:"center",alignItems:"center"},smallBtn:{position:"absolute",top:"-20px",right:"-20px",width:"40px",height:"40px","& .MuiSvgIcon-root":{width:"25px"},color:"#e66465",background:"rgb(225,225,225)"},error:{color:"red",width:"90%",fontWeight:"bold",backgroundColor:"rgba(255,255,255,0.8)"}}})),me=function(e){var t=e.id,n=e.userId,c=e.imgUrl,o=e.replaceImgUrl,r=e.updateImages,s=he(),l=Object(a.useState)(""),u=Object(i.a)(l,2),d=u[0],j=u[1],b=Object(a.useState)(!1),h=Object(i.a)(b,2),g=h[0],O=h[1],p=Object(a.useState)(null),f=Object(i.a)(p,2),x=f[0],v=f[1];return Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)(m.a,{elevation:6,className:s.paper,children:[Object(N.jsxs)("div",{className:s.divImg,style:{backgroundImage:"url(".concat(c,")")},children:[d?Object(N.jsx)("span",{className:s.error,children:d}):null,g?Object(N.jsx)(be.a,{variant:"determinate",value:x}):null]}),Object(N.jsx)("input",{accept:"image/*",className:s.input,id:"contained-button-file-".concat(t),multiple:!1,type:"file",onChange:function(e){return function(e){var a=e.target;if(a.files&&a.files[0]){var c=a.files[0];if(c.size>6123456)return void j("Image must be less then 6Mb!");O(!0),j("");var i=c.name.lastIndexOf("."),s=c.name.slice(0,i)+Date.now();console.log(s);var l=y.storage().ref().child("".concat(n,"/").concat(s)).put(c);l.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(v(t),e.state){case y.storage.TaskState.PAUSED:console.log("Upload is paused");break;case y.storage.TaskState.RUNNING:console.log("Upload is running")}}),(function(e){console.log("An error occurred on image upload ",e.message)}),(function(){l.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),function(){var n=Object(ie.a)(re.a.mark((function n(){return re.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o(t,e);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()().then((function(e){return r(e)})),O(!1)})).catch((function(e){return console.log("Error while uploading the image: ",e.message)}))}))}}(e)}}),Object(N.jsx)("label",{htmlFor:"contained-button-file-".concat(t),children:Object(N.jsx)(se.a,{title:"Add Photo",arrow:!0,TransitionComponent:le.a,placement:"right",children:Object(N.jsx)(ue.a,{component:"div",className:s.smallBtn,children:Object(N.jsx)(je.a,{})})})})]})})},ge=Object(l.a)({root:{width:"40vw",minWidth:"400px",margin:"0 auto","& .MuiSvgIcon-root.MuiSelect-icon ":{color:"white"},"& .MuiInput-underline:hover:not(.Mui-disabled):before":{borderBottomColor:"white"},"& .MuiInput-underline.Mui-disabled:before":{borderBottom:"1px solid rgb(205,205,205)"},"& .MuiInput-underline:before":{borderBottomColor:"white"},"&:hover":{borderBottomColor:"red"},"& input.MuiInputBase-input.MuiInput-input":{color:"white"},"& div.MuiSelect-select.MuiSelect-selectMenu.MuiInputBase-input.MuiInput-input":{color:"white"}},paper:{margin:"5px 0",background:"none",color:"white"},item:{width:"100%",margin:"20px 0"},button:{color:"#e66465",background:"#9198e5"},input:{display:"none",color:"white","& .MuiInputBase-input":{color:"white"}},formControl:{"& .MuiSelect-select:focus":{background:"none"},minWidth:"250px",margin:0}}),Oe=Object(te.a)({root:{"& label":{color:"rgb(225, 225, 225)"},"& label.Mui-focused":{color:"rgb(225, 225, 225)"},"& .MuiInput-underline:before":{borderBottomColor:"white"},"& .MuiInput-underline:after":{borderBottomColor:"#1976d2"},"& .MuiOutlinedInput-root":{color:"rgb(225, 225, 225)","& fieldset":{borderColor:"rgb(225, 225, 225)"},"&:hover fieldset":{borderColor:"rgb(225, 225, 225)"}}}})(ce.a),pe=function(){var e=Object(C.b)(),t=Object(C.c)((function(e){return e.currentUser})),n=x.collection("users").doc(t.uid),c=ge(),o=Object(a.useState)(t.aboutYou),r=Object(i.a)(o,2),s=r[0],l=r[1],u=t.passions.join(", "),d=Object(a.useState)(u),j=Object(i.a)(d,2),h=j[0],g=j[1],f=Object(a.useState)(t.gender),v=Object(i.a)(f,2),y=v[0],w=v[1],S=Object(a.useState)(t.sexualOrientation),k=Object(i.a)(S,2),I=k[0],M=k[1],U=t.country.split(" ")[0],F=t.country.split(" ")[1],E=Object(a.useState)(U),_=Object(i.a)(E,2),T=_[0],P=_[1],B=Object(a.useState)([]),R=Object(i.a)(B,2),L=R[0],z=R[1],D=Object(a.useState)(F),W=Object(i.a)(D,2),V=W[0],G=W[1],J=Object(a.useState)([]),H=Object(i.a)(J,2),$=H[0],q=H[1],ee=Object(a.useState)(t.jobTitle),te=Object(i.a)(ee,2),ce=te[0],oe=te[1],re=Object(a.useState)(t.company),ie=Object(i.a)(re,2),se=ie[0],le=ie[1],ue=Object(a.useState)(t.collageOrUni),de=Object(i.a)(ue,2),je=de[0],be=de[1];Object(a.useEffect)((function(){T&&fetch("https://restcountries.eu/rest/v2/region/"+T).then((function(e){return e.json()})).then((function(e){return z(e)})).catch((function(e){return console.log(e)}))}),[T]),Object(a.useEffect)((function(){x.collection("users").doc("".concat(t.uid)).get().then((function(e){if(e.exists){var t=fe(e.data().images,6);q(t)}})).catch((function(e){console.log("Error getting document:",e)}))}),[]);var he=function(e){return x.collection("users").doc("".concat(t.uid)).update({images:e}).then((function(){console.log("Document successfully updated!")})).catch((function(e){console.error("Error updating document: ",e)}))},pe=function(t,n){var a=Object(A.a)($);return a[t]=n,q(a),e({type:"userChangedProfilePic",payload:a}),a},fe=function(e,t){var n=Object(A.a)(e);return n.length=t,e.length<t&&n.fill("",e.length),n};return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(p.a,{}),Object(N.jsx)("form",{noValidate:!0,autoComplete:"off",children:Object(N.jsxs)(O.a,{container:!0,className:c.root,direction:"column",children:[Object(N.jsx)(O.a,{item:!0,children:Object(N.jsx)(m.a,{elevation:0,className:c.paper,children:Object(N.jsxs)(O.a,{container:!0,direction:"column",children:[Object(N.jsx)(O.a,{item:!0,className:c.item,children:Object(N.jsx)(Y.a,{variant:"h4",children:"Upload your images"})}),Object(N.jsx)(O.a,{container:!0,justify:"center",wrap:"wrap",style:{margin:"30px 0",padding:"20px"},children:$.map((function(e,n){return Object(N.jsx)(O.a,{item:!0,children:Object(N.jsx)(me,{id:n,userId:t.uid,replaceImgUrl:pe,updateImages:he,imgUrl:$[n]||""},n)},n)}))})]})})}),Object(N.jsx)(O.a,{item:!0,children:Object(N.jsx)(m.a,{elevation:0,className:c.paper,children:Object(N.jsxs)(O.a,{container:!0,direction:"column",alignItems:"center",children:[Object(N.jsx)(O.a,{item:!0,className:c.item,children:Object(N.jsx)(Y.a,{variant:"h4",children:"About you"})}),Object(N.jsx)(O.a,{item:!0,xs:"auto",style:{width:"80%",marginBottom:"30px"},children:Object(N.jsx)(Oe,{id:"outlined-multiline-flexible",label:"About you",multiline:!0,rows:4,rowsMax:4,fullWidth:!0,value:s,onChange:function(e){l(e.target.value)},onBlur:function(a){t.aboutYou!==s&&n.update({aboutYou:a.target.value}).then((function(){console.log("Updated successfully"),e({type:"userChangedAboutYou",payload:a.target.value})})).catch((function(e){console.log("Error updating",e)}))},variant:"outlined"})})]})})}),Object(N.jsx)(O.a,{item:!0,children:Object(N.jsx)(m.a,{elevation:0,className:c.paper,children:Object(N.jsxs)(O.a,{container:!0,direction:"column",alignItems:"center",children:[Object(N.jsx)(O.a,{item:!0,className:c.item,children:Object(N.jsx)(Y.a,{variant:"h4",children:"Passions"})}),Object(N.jsx)(O.a,{item:!0,xs:"auto",style:{width:"80%",marginBottom:"30px"},children:Object(N.jsx)(Oe,{id:"outlined-multiline-flexible",label:"Passions",multiline:!0,rows:4,rowsMax:4,fullWidth:!0,value:h,onChange:function(e){g(e.target.value)},onBlur:function(a){var c=h.split(", ");t.passions.join(", ")!==c&&n.update({passions:c}).then((function(){console.log("Updated successfully"),e({type:"userChangedPassions",payload:c})})).catch((function(e){console.log("Error updating",e)}))},variant:"outlined",placeholder:'Separate them by ", "'})})]})})}),Object(N.jsx)(O.a,{item:!0,children:Object(N.jsx)(m.a,{elevation:0,className:c.paper,children:Object(N.jsxs)(O.a,{container:!0,direction:"column",alignItems:"center",children:[Object(N.jsx)(O.a,{item:!0,className:c.item,children:Object(N.jsx)(Y.a,{variant:"h4",children:"Gender:"})}),Object(N.jsx)(O.a,{item:!0,xs:"auto",style:{justifyContent:"center"},children:Object(N.jsxs)(Z.a,{style:{margin:"0 auto"},row:!0,"aria-flowto":"right","aria-label":"gender",name:"gender1",value:y,onChange:function(t){w(t.target.value),n.update({gender:t.target.value}).then((function(){console.log("updated successfully"),e({type:"userChangedGender",payload:t.target.value})})).catch((function(e){console.log("Error updating",e)}))},children:[Object(N.jsx)(K.a,{className:c.radio,value:"female",control:Object(N.jsx)(X.a,{color:"secondary"}),label:"Female"}),Object(N.jsx)(K.a,{value:"male",control:Object(N.jsx)(X.a,{color:"primary"}),label:"Male"}),Object(N.jsx)(K.a,{value:"other",control:Object(N.jsx)(X.a,{color:"default"}),label:"Other"})]})})]})})}),Object(N.jsx)(O.a,{item:!0,children:Object(N.jsx)(m.a,{elevation:0,className:c.paper,children:Object(N.jsxs)(O.a,{container:!0,direction:"column",alignItems:"center",children:[Object(N.jsx)(O.a,{item:!0,className:c.item,children:Object(N.jsx)(Y.a,{variant:"h4",children:"Sexual orientation:"})}),Object(N.jsx)(O.a,{item:!0,xs:"auto",className:c.item,children:Object(N.jsx)(Q.a,{className:c.formControl,children:Object(N.jsxs)(ne.a,{variant:"standard",labelId:"demo-simple-select-label",id:"sexualOrientation-select",value:I,onChange:function(t){M(t.target.value),n.update({sexualOrientation:t.target.value}).then((function(){console.log("updated successfully"),e({type:"userChangedOrientation",payload:t.target.value})})).catch((function(e){console.log("Error updating",e)}))},children:[Object(N.jsx)(b.a,{value:"Straight",children:"Straight"}),Object(N.jsx)(b.a,{value:"Gay",children:"Gay"}),Object(N.jsx)(b.a,{value:"Lesbian",children:"Lesbian"}),Object(N.jsx)(b.a,{value:"Bisexual",children:"Bisexual"}),Object(N.jsx)(b.a,{value:"Asexual",children:"Asexual"}),Object(N.jsx)(b.a,{value:"Demisexual",children:"Demisexual"}),Object(N.jsx)(b.a,{value:"Queer",children:"Queer"}),Object(N.jsx)(b.a,{value:"Questioning",children:"Questioning"})]})})})]})})}),Object(N.jsx)(O.a,{item:!0,children:Object(N.jsx)(m.a,{elevation:0,className:c.paper,children:Object(N.jsxs)(O.a,{container:!0,direction:"column",alignItems:"center",children:[Object(N.jsx)(O.a,{item:!0,className:c.item,children:Object(N.jsx)(Y.a,{variant:"h4",children:"Living in:"})}),Object(N.jsx)(O.a,{item:!0,xs:"auto",className:c.item,children:Object(N.jsxs)(Q.a,{className:c.formControl,children:[Object(N.jsx)(ae.a,{style:{color:"white"},children:"Region"}),Object(N.jsxs)(ne.a,{variant:"standard",labelId:"demo-simple-select-label",id:"sexualOrientation-select",value:T,onChange:function(e){P(e.target.value)},children:[Object(N.jsx)(b.a,{value:"africa",children:"Africa"}),Object(N.jsx)(b.a,{value:"americas",children:"Americas"}),Object(N.jsx)(b.a,{value:"asia",children:"Asia"}),Object(N.jsx)(b.a,{value:"europe",children:"Europe"}),Object(N.jsx)(b.a,{value:"oceania",children:"Oceania"})]})]})}),Object(N.jsx)(O.a,{item:!0,xs:"auto",className:c.item,children:Object(N.jsxs)(Q.a,{className:c.formControl,children:[Object(N.jsx)(ae.a,{style:{color:"white"},disabled:!0,children:"Country"}),Object(N.jsx)(ne.a,{disabled:!T,variant:"standard",labelId:"demo-simple-select-label",id:"country",value:V,onChange:function(t){G(t.target.value),n.update({country:"".concat(T," ").concat(t.target.value)}).then((function(){console.log("updated successfully"),e({type:"userChangedLivingIn",payload:"".concat(T," ").concat(t.target.value)})})).catch((function(e){console.log("Error updating",e)}))},children:L.map((function(e){return Object(N.jsx)(b.a,{value:e.name,children:e.name},e.alpha2Code)}))})]})})]})})}),Object(N.jsx)(O.a,{item:!0,children:Object(N.jsx)(m.a,{elevation:0,className:c.paper,children:Object(N.jsxs)(O.a,{container:!0,direction:"column",alignItems:"center",children:[Object(N.jsx)(O.a,{item:!0,className:c.item,children:Object(N.jsx)(Y.a,{variant:"h4",children:"Job title:"})}),Object(N.jsx)(O.a,{item:!0,xs:"auto",style:{width:"80%",marginBottom:"30px"},children:Object(N.jsx)(Oe,{id:"standard-secondary",label:"Job title",fullWidth:!0,color:"secondary",value:ce,onChange:function(e){oe(e.target.value)},onBlur:function(a){t.jobTitle!==a.target.value&&n.update({jobTitle:a.target.value}).then((function(){console.log("Updated successfully"),e({type:"userChangedJobTitle",payload:a.target.value})})).catch((function(e){console.log("Error updating",e)}))}})})]})})}),Object(N.jsx)(O.a,{item:!0,children:Object(N.jsx)(m.a,{elevation:0,className:c.paper,children:Object(N.jsxs)(O.a,{container:!0,direction:"column",alignItems:"center",children:[Object(N.jsx)(O.a,{item:!0,className:c.item,children:Object(N.jsx)(Y.a,{variant:"h4",children:"Company:"})}),Object(N.jsx)(O.a,{item:!0,xs:"auto",style:{width:"80%",marginBottom:"30px"},children:Object(N.jsx)(Oe,{id:"standard-secondary",label:"Company",fullWidth:!0,color:"secondary",value:se,onChange:function(e){le(e.target.value)},onBlur:function(a){t.company!==a.target.value&&n.update({company:a.target.value}).then((function(){console.log("Updated successfully"),e({type:"userChangedCompany",payload:a.target.value})})).catch((function(e){console.log("Error updating",e)}))}})})]})})}),Object(N.jsx)(O.a,{item:!0,children:Object(N.jsx)(m.a,{elevation:0,className:c.paper,children:Object(N.jsxs)(O.a,{container:!0,direction:"column",alignItems:"center",children:[Object(N.jsx)(O.a,{item:!0,className:c.item,children:Object(N.jsx)(Y.a,{variant:"h4",children:"College/Uni:"})}),Object(N.jsx)(O.a,{item:!0,xs:"auto",style:{width:"80%",marginBottom:"30px"},children:Object(N.jsx)(Oe,{id:"standard-secondary",label:"College/Uni",fullWidth:!0,color:"secondary",value:je,onChange:function(e){be(e.target.value)},onBlur:function(a){t.collageOrUni!==a.target.value&&n.update({collageOrUni:a.target.value}).then((function(){console.log("Updated successfully"),e({type:"userChangedCollegeOrUni",payload:a.target.value})})).catch((function(e){console.log("Error updating",e)}))}})})]})})})]})})]})},fe=n(251),xe=n(301),ve=n(248),ye=n(302),Ce=n(290),we=n(303),Ne=n(304),Se="https://firebasestorage.googleapis.com/v0/b/fir-project-d9b09.appspot.com/o/profilePics%2Fdefault-profile-pic.jpg?alt=media&token=12bd0268-84bd-47ee-9bf7-5ca4269f87d5",ke=Object(l.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),width:"35ch"},"& .MuiFormControl-root":{"& .MuiFormHelperText-root.MuiFormHelperText-contained":{color:"red !important",fontSize:"0.9rem",padding:0,borderRadius:"0"}}},container:{marginTop:"1rem",width:"max-content",margin:"0 auto",display:"flex",maxWidth:"400px"},label:{lineHeight:"4px"},googleIcon:{width:"1.5rem",marginRight:"8px"}}})),Ie=Object(te.a)({root:{"& label":{color:"rgb(225, 225, 225)"},"& label.Mui-focused":{color:"rgb(225, 225, 225)"},"& .MuiInput-underline:before":{borderBottomColor:"white"},"& .MuiInput-underline:after":{borderBottomColor:"#1976d2"},"& .MuiOutlinedInput-root":{color:"rgb(225, 225, 225)","& fieldset":{borderColor:"rgb(225, 225, 225)"},"&:hover fieldset":{borderColor:"rgb(225, 225, 225)"}},"& .MuiFormHelperText-contained":{color:"red",fontSize:"0.9rem",padding:0,borderRadius:"0"},"& #email-reg-text-helper.MuiFormHelperText-root.MuiFormHelperText-contained":{color:"red !important",fontSize:"0.9rem",padding:0,borderRadius:"0"}}})(ce.a),Me=Object(te.a)({root:{"& span.MuiIconButton-label":{color:"rgb(225, 225, 225)"},"& input":{color:"rgb(225, 225, 225)"},"& fieldset":{border:"1px solid rgb(225, 225, 225)"},"&:hover fieldset":{border:"1px solid rgb(225, 225, 225) !important"},"&.MuiOutlinedInput-root.Mui-focused fieldset":{border:"2px solid rgb(225, 225, 225) !important"}}})(fe.a);function Ae(e){e.setCurrentUser;var t=ke(),n=Object(a.useState)(""),c=Object(i.a)(n,2),o=c[0],r=c[1],s=Object(a.useState)(""),l=Object(i.a)(s,2),u=l[0],d=l[1],j=Object(a.useState)(""),b=Object(i.a)(j,2),h=b[0],m=b[1],g=Object(a.useState)(""),O=Object(i.a)(g,2),f=O[0],w=O[1],S=Object(a.useState)(""),k=Object(i.a)(S,2),I=k[0],M=k[1],A=Object(a.useState)(!1),U=Object(i.a)(A,2),F=U[0],E=U[1],_=Object(a.useState)(!1),T=Object(i.a)(_,2),P=T[0],B=T[1],R=Object(a.useState)(!1),L=Object(i.a)(R,2),z=L[0],D=L[1],Y=Object(a.useState)(!1),V=Object(i.a)(Y,2),G=V[0],J=V[1],H=Object(a.useState)(!1),X=Object(i.a)(H,2),Z=X[0],K=X[1],$=Object(a.useState)(!1),q=Object(i.a)($,2),ee=q[0],te=q[1],ne=Object(C.b)();function ce(e,t){switch(t){case"firstName":m(e);break;case"lastName":w(e);break;case"email":r(e);break;case"password":d(e);break;case"age":M(e)}}var oe=function(e){return/[a-zA-Z][a-zA-Z ]{2,}/.test(e)},re=function(e,t,n,a,c){B(e),D(t),J(n),K(a),te(c)},ie=function(){var e="",t="",n="",a="",c="",r=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(o);return oe(h)||(e="Must be at least 3 letters long!"),oe(f)||(t="Must be at least 3 letters long!"),r||(n="Email is badly formatted!"),I<18&&(a="Must be over 18!"),u.length<6&&(c="Must be at least 6 chars"),e||t||n||a||c?(re(e,t,n,c,a),!1):(re(e,t,n,c,a),!0)};var se=function(e,t){x.collection("users").doc("".concat(e)).set(t).then((function(){console.log("Document successfully written!"),ne({type:"userLoggedIn",payload:t})})).catch((function(e){console.error("Error writing document: ",e)}))};return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(p.a,{}),Object(N.jsx)(xe.a,{className:t.container,position:"relative",align:"center",children:Object(N.jsxs)("form",{className:t.root,noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),ie()&&(console.log("validno e!"),v.setPersistence(y.auth.Auth.Persistence.LOCAL).then((function(){return v.createUserWithEmailAndPassword(o,u)})).then((function(){var e=v.currentUser,t="".concat(h[0]).concat(h.slice(1)," ").concat(f[0]).concat(f.slice(1)),n={uid:e.uid,name:t,email:o,aboutYou:"",age:I,collageOrUni:"",company:"",country:"",city:"",gender:"",jobTitle:"",images:[Se],mediaProfiles:[],sexualOrientation:"",youtubeSong:"",passions:[],chats:[],isOnline:!0,liked:[],disliked:[],matches:[]};se(e.uid,n),r(""),m(""),w(""),d(""),M("")})).catch((function(e){J(e.message)})))},children:[Object(N.jsxs)(Q.a,{variant:"outlined",children:[Object(N.jsx)(Ie,{id:"firstNameInput",autoFocus:!0,error:!!P,"aria-describedby":"firstName-reg-text-helper",value:h,onChange:function(e){return ce(e.target.value.trim(),"firstName")},label:"First name",variant:"outlined"}),!!P&&Object(N.jsx)(ve.a,{id:"firstName-reg-text-helper",children:P})]}),Object(N.jsxs)(Q.a,{variant:"outlined",children:[Object(N.jsx)(Ie,{id:"lastNameInput",autoFocus:!0,error:!!z,"aria-describedby":"lastName-reg-text-helper",onChange:function(e){return ce(e.target.value.trim(),"lastName")},label:"Last name",variant:"outlined"}),!!z&&Object(N.jsx)(ve.a,{id:"lastName-reg-text-helper",children:z})]}),Object(N.jsxs)(Q.a,{variant:"outlined",children:[Object(N.jsx)(Ie,{id:"email",autoFocus:!0,type:"email","aria-describedby":"email-reg-text-helper",error:!!G,value:o,onChange:function(e){return ce(e.target.value.trim(),"email")},label:"Email",variant:"outlined"}),!!G&&Object(N.jsx)(ve.a,{id:"email-reg-text-helper",children:G})]}),Object(N.jsxs)(Q.a,{variant:"outlined",children:[Object(N.jsx)(ae.a,{className:"label",style:{color:"rgb(225, 225, 225)"},htmlFor:"password",children:"Password"}),Object(N.jsx)(Me,{id:"password",error:!!Z,value:u,onChange:function(e){return ce(e.target.value,"password")},label:"Password",variant:"outlined",type:F?"text":"password",autoComplete:"current-password","aria-describedby":"password-reg-text-helper",endAdornment:Object(N.jsx)(ye.a,{position:"end",children:Object(N.jsx)(Ce.a,{"aria-label":"toggle password visibility",onClick:function(){E(!F)},onMouseDown:function(e){e.preventDefault()},edge:"end",children:F?Object(N.jsx)(we.a,{}):Object(N.jsx)(Ne.a,{})})})}),!!Z&&Object(N.jsx)(ve.a,{id:"password-reg-text-helper",children:Z})]}),Object(N.jsxs)(Q.a,{variant:"outlined",children:[Object(N.jsx)(Ie,{id:"age",error:!!ee,value:I,onChange:function(e){return ce(e.target.value,"age")},label:"How old are you?",variant:"outlined",type:"number","aria-describedby":"age-reg-text-helper"}),!!ee&&Object(N.jsx)(ve.a,{id:"age-reg-text-helper",children:ee})]}),Object(N.jsx)(W.a,{variant:"contained",color:"primary",type:"submit",disabled:!I||!o||!h||!f||u.length<1,children:"Register"}),Object(N.jsxs)(W.a,{variant:"contained",color:"primary",onClick:function(){var e=new y.auth.GoogleAuthProvider;v.signInWithPopup(e).then((function(e){console.log("logvane s google ",e),console.log("dokato zarejda dali e lognat");var t={uid:e.user.uid,name:e.user.displayName,email:e.user.email,aboutYou:"",age:18,collageOrUni:"",company:"",country:"",city:"",gender:"",jobTitle:"",images:[e.additionalUserInfo.profile.picture||Se],mediaProfiles:[],sexualOrientation:"",youtubeSong:"",passions:[],chats:[],isOnline:!0,liked:[],disliked:[],matches:[]};!function(e,t){var n=x.collection("users").doc(e);n.get().then((function(e){if(!e.exists)return console.log("nqma takyv potrebirel"),n.set(t).then((function(){console.log("Document successfully updated! // syzdadoh takyv potrebitel")})).catch((function(e){console.error("Error updating document: ",e)}));console.log("IVA VECHE takyv potrebirel, ne promenqm bazata"),ne({type:"userLoggedIn",payload:t})})).catch((function(e){console.log("Error getting document:",e)}))}(e.user.uid,t)})).catch((function(e){console.log(e.message)}))},children:[Object(N.jsx)("img",{className:t.googleIcon,src:"https://img.icons8.com/ios-filled/50/000000/google-logo.png",alt:"google icon"}),Object(N.jsx)("span",{children:" Continue with Google"})]})]})})]})}var Ue=Object(l.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),width:"30ch"},"& .MuiFormHelperText-contained":{color:"red",fontSize:"0.9rem",padding:0,borderRadius:"0"}},form:{minWidth:"300px",maxWidth:"400px"},container:{marginTop:"5rem",maxWidth:"500px",margin:"0 auto",display:"flex"}}})),Fe=Object(te.a)({root:{"& label":{color:"rgb(225, 225, 225)"},"& label.Mui-focused":{color:"rgb(225, 225, 225)"},"& .MuiOutlinedInput-root":{color:"rgb(225, 225, 225)","& fieldset":{borderColor:"rgb(225, 225, 225)"},"&:hover fieldset":{borderColor:"rgb(225, 225, 225)"}}}})(ce.a),Ee=Object(te.a)({root:{"& span.MuiIconButton-label":{color:"rgb(225, 225, 225)"},"& input":{color:"rgb(225, 225, 225)"},"& fieldset":{border:"1px solid rgb(225, 225, 225)"},"&:hover fieldset":{border:"1px solid rgb(225, 225, 225) !important"},"&.MuiOutlinedInput-root.Mui-focused fieldset":{border:"2px solid rgb(225, 225, 225) !important"}}})(fe.a);function _e(){var e=Ue(),t=Object(a.useState)(""),n=Object(i.a)(t,2),c=n[0],o=n[1],r=Object(a.useState)(""),s=Object(i.a)(r,2),l=s[0],u=s[1],d=Object(a.useState)(!1),j=Object(i.a)(d,2),b=j[0],h=j[1],m=Object(a.useState)(""),g=Object(i.a)(m,2),O=g[0],f=g[1],y=Object(a.useState)(!1),w=Object(i.a)(y,2),S=w[0],k=w[1],I=Object(C.b)();return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(p.a,{}),Object(N.jsx)(xe.a,{className:e.container,position:"relative",align:"center",children:Object(N.jsxs)("form",{className:e.root,onSubmit:function(e){e.preventDefault(),function(){var e="",t=!1;return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(c)||(e="Email is badly formatted!"),l.length<6&&(t=!0),e||t?(f(e),k(t),!1):(f(e),k(t),!0)}()&&(console.log("validno e !"),v.setPersistence("session").then((function(){return v.signInWithEmailAndPassword(c,l)})).then((function(e){x.collection("users").doc(e.user.uid).get().then((function(e){console.log("=====>",e.data()),I({type:"userLoggedIn",payload:e.data()}),o(""),u("")}))})).catch((function(e){console.log(e.message),f(e.message)})))},noValidate:!0,autoComplete:"off",children:[Object(N.jsxs)(Q.a,{variant:"outlined",children:[Object(N.jsx)(Fe,{id:"email",fullWidth:!0,autoFocus:!0,error:!!O,"aria-describedby":"email-login-text-helper",onChange:function(e){o(e.target.value.trim())},label:"Username",variant:"outlined"}),!!O&&Object(N.jsx)(ve.a,{id:"email-login-text-helper",children:O})]}),Object(N.jsxs)(Q.a,{variant:"outlined",children:[Object(N.jsx)(ae.a,{className:"label",style:{color:"rgb(225, 225, 225)"},htmlFor:"password",children:"Password"}),Object(N.jsx)(Ee,{id:"password",fullWidth:!0,"aria-describedby":"password-login-text-helper",error:!!S,value:l,onChange:function(e){u(e.target.value.trim())},label:"Password",variant:"outlined",type:b?"text":"password",autoComplete:"current-password",endAdornment:Object(N.jsx)(ye.a,{position:"end",children:Object(N.jsx)(Ce.a,{"aria-label":"toggle password visibility",onClick:function(){h(!b),console.log(b)},onMouseDown:function(e){e.preventDefault()},edge:"end",children:b?Object(N.jsx)(we.a,{}):Object(N.jsx)(Ne.a,{})})})}),!!S&&Object(N.jsx)(ve.a,{id:"password-login-text-helper",children:"Must be at least 6 chars!"})]}),Object(N.jsx)(W.a,{type:"submit",variant:"contained",color:"primary",children:"Login"})]})})]})}var Te=n(94),Pe=(n(239),Object(l.a)({container:{width:"40vw",minWidth:"400px",alignItems:"center",textAlign:"center",color:"white"},name:{marginBottom:"3rem"},textField:{fontSize:"1.2rem",color:"rgb(225,225,225)",margin:"0 auto",width:"100%",padding:"0 3rem",textAlign:"center"}}));function Be(){var e=Pe(),t=Object(C.c)((function(e){return e.chosenProfile})),n=Object(a.useState)([]),c=Object(i.a)(n,2),o=c[0],r=c[1];return Object(a.useEffect)((function(){var e=t.images.filter((function(e){return""!==e}));r(e)}),[t]),Object(N.jsx)(p.a,{children:Object(N.jsxs)("div",{className:e.container,children:[Object(N.jsx)("h2",{className:e.name,children:null===t||void 0===t?void 0:t.name}),Object(N.jsx)(Te.a,{images:o,width:300,renderOverlay:function(){return Object(N.jsx)("div",{style:{fontSize:"2rem"},children:"Show"})},overlayBackgroundColor:"#e66465"}),Object(N.jsx)("h3",{children:"About me"}),Object(N.jsx)("div",{className:e.textField,children:null===t||void 0===t?void 0:t.aboutYou}),Object(N.jsx)("hr",{}),Object(N.jsx)("h3",{children:"Passions"}),Object(N.jsx)("div",{className:e.textField,children:null===t||void 0===t?void 0:t.passions.join(", ")}),Object(N.jsx)("hr",{}),Object(N.jsx)("h3",{children:"Gender"}),Object(N.jsx)("div",{className:e.textField,children:null===t||void 0===t?void 0:t.gender}),Object(N.jsx)("hr",{}),Object(N.jsx)("h3",{children:"Sexual orientation"}),Object(N.jsx)("div",{className:e.textField,children:null===t||void 0===t?void 0:t.sexualOrientation}),Object(N.jsx)("hr",{}),Object(N.jsx)("h3",{children:"Living in"}),Object(N.jsx)("div",{className:e.textField,children:null===t||void 0===t?void 0:t.country}),Object(N.jsx)("hr",{}),Object(N.jsx)("h3",{children:"Job title"}),Object(N.jsx)("div",{className:e.textField,children:null===t||void 0===t?void 0:t.jobTitle}),Object(N.jsx)("hr",{}),Object(N.jsx)("h3",{children:"Company"}),Object(N.jsx)("div",{className:e.textField,children:null===t||void 0===t?void 0:t.company}),Object(N.jsx)("hr",{}),Object(N.jsx)("h3",{children:"College"}),Object(N.jsx)("div",{className:e.textField,children:null===t||void 0===t?void 0:t.collageOrUni})]})})}var Re=Object(l.a)({container:{width:"40vw",alignItems:"center",textAlign:"center",color:"white"},name:{marginBottom:"3rem"},textField:{fontSize:"1.2rem",color:"rgb(225,225,225)",margin:"0 auto",width:"100%",padding:"0 5rem",textAlign:"center"}});function Le(){var e=Re(),t=Object(C.c)((function(e){return e.chosenProfile})),n=Object(a.useState)([]),c=Object(i.a)(n,2),o=c[0],r=c[1];return Object(a.useEffect)((function(){var e=null===t||void 0===t?void 0:t.images.filter((function(e){return""!==e}));r(e)}),[t]),Object(N.jsx)(p.a,{children:Object(N.jsxs)("div",{className:e.container,children:[Object(N.jsx)("h2",{className:e.name,children:null===t||void 0===t?void 0:t.name}),Object(N.jsx)(Te.a,{images:o,width:300,renderOverlay:function(){return Object(N.jsx)("div",{style:{fontSize:"2rem"},children:"Show"})},overlayBackgroundColor:"tomato"}),Object(N.jsx)("h3",{children:"About me"}),Object(N.jsx)("div",{className:e.textField,children:null===t||void 0===t?void 0:t.aboutYou}),Object(N.jsx)("hr",{}),Object(N.jsx)("h3",{children:"Passions"}),Object(N.jsx)("div",{className:e.textField,children:null===t||void 0===t?void 0:t.passions.join(", ")}),Object(N.jsx)("hr",{}),Object(N.jsx)("h3",{children:"Gender"}),Object(N.jsx)("div",{className:e.textField,children:null===t||void 0===t?void 0:t.gender}),Object(N.jsx)("hr",{}),Object(N.jsx)("h3",{children:"Sexual orientation"}),Object(N.jsx)("div",{className:e.textField,children:null===t||void 0===t?void 0:t.sexualOrientation}),Object(N.jsx)("hr",{}),Object(N.jsx)("h3",{children:"Living in"}),Object(N.jsx)("div",{className:e.textField,children:null===t||void 0===t?void 0:t.country}),Object(N.jsx)("hr",{}),Object(N.jsx)("h3",{children:"Job title"}),Object(N.jsx)("div",{className:e.textField,children:null===t||void 0===t?void 0:t.jobTitle}),Object(N.jsx)("hr",{}),Object(N.jsx)("h3",{children:"Company"}),Object(N.jsx)("div",{className:e.textField,children:null===t||void 0===t?void 0:t.company}),Object(N.jsx)("hr",{}),Object(N.jsx)("h3",{children:"College"}),Object(N.jsx)("div",{className:e.textField,children:null===t||void 0===t?void 0:t.collageOrUni})]})})}var ze=n(147),De=n.n(ze),We=Object(l.a)((function(e){return{flexColumn:{display:"flex",flexDirection:"column",width:"100%",justifyContent:"center",alignItems:"center",color:"white"},title:{fontSize:"2rem",width:"max-content"},container:{width:"60%",position:"relative",display:"flex",justifyContent:"center",alignItems:"center",marginTop:"1rem"},item:{margin:"".concat(e.spacing(2),"px"),"&:hover":{boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)"}},root:{position:"relative",backgroundColor:"rgba(255, 255, 255, 0.4)",width:250,height:350,margin:"13px",display:"flex",flexDirection:"column",justifyContent:"space-between"},expanded:{height:"auto",position:"fixed",top:"50px",left:"5%",zIndex:2},media:{height:240},colorBlack:{color:"black"},btnContainer:{marginBottom:"2rem"}}}));function Ye(){var e=We(),t=Object(C.c)((function(e){return e.alreadyRemoved})),n=Object(a.useState)(-1),c=Object(i.a)(n,2),o=c[0],r=c[1],s=Object(C.c)((function(e){return e.currentUser})),l=Object(a.useState)([]),u=Object(i.a)(l,2),d=u[0],j=u[1],b=Object(C.c)((function(e){return e.allUsers})),h=Object(a.useState)(!0),m=Object(i.a)(h,2),p=(m[0],m[1]),f=Object(C.b)();Object(a.useEffect)((function(){var e=b.filter((function(e){return s.matches.includes(e.uid)}));j(e)}),[s]),Object(a.useEffect)((function(){(null===d||void 0===d?void 0:d.length)>0&&p(!1)}),[d]);var v=function(e){var n=t.filter((function(t){return t!==e}));f({type:"setRemoved",payload:n});var a=s.matches.filter((function(t){return t!==e})),c=s.liked.filter((function(t){return t!==e})),o=b.find((function(t){return t.uid===e})).matches.filter((function(e){return e!==s.uid}));x.collection("users").doc(s.uid).update({matches:Object(A.a)(a),liked:Object(A.a)(c)}).then((function(){f({type:"userRemovedFromLiked",payload:c}),f({type:"userRemovedFromMatches",payload:a})})).catch((function(e){return console.log("Error after updating db for currentUser: ",e)})),x.collection("users").doc(e).update({matches:Object(A.a)(o)}).then((function(){var t=Object(A.a)(b);t=t.map((function(t){return t.uid===e&&(t.matches=o),t})),f({type:"getAllUsers",payload:t});var n=d.filter((function(t){return t.uid!==e}));j(n)})).catch((function(e){return console.log("Error after updating db for currentUser: ",e)})),function(e,t){var n=e>t?"".concat(t,"_").concat(e):"".concat(e,"_").concat(t);x.collection("chatRooms").doc(n).delete().then((function(){return console.log("Successfully deleted the chatRoom for users: ",t,e)})).catch((function(e){return console.log("Error on chatRoom deleting: ",e)}))}(e,s.uid)};return Object(N.jsxs)("div",{className:e.flexColumn,children:[0===d.length?Object(N.jsx)("h2",{children:"You don't have any matches yet!"}):Object(N.jsx)(Y.a,{className:e.title,children:"Your matches"}),Object(N.jsx)(O.a,{container:!0,className:e.container,children:d.map((function(t){var n;return Object(N.jsxs)(B.a,{elevation:20,className:o===t.uid?"".concat(e.root," ").concat(e.expanded):e.root,onClick:function(){return function(e){f({type:"setChosenProfile",payload:e}),window.localStorage.setItem("chosenProfile",JSON.stringify(e))}(t)},children:[Object(N.jsxs)(R.a,{component:g.b,to:"/matches/"+t.uid,children:[Object(N.jsx)(D.a,{className:e.media,image:t.images&&t.images[0]||"https://t4.ftcdn.net/jpg/00/64/67/63/360_F_64676383_LdbmhiNM6Ypzb3FM4PPuFP9rHe7ri8Ju.jpg",title:t.name}),Object(N.jsxs)(z.a,{children:[Object(N.jsxs)(Y.a,{className:e.colorBlack,gutterBottom:!0,variant:"h5",component:"h2",children:[t.name," - ",t.age]}),Object(N.jsx)(Y.a,{variant:"body2",color:"textSecondary",component:"p",children:t.aboutYou?t.aboutYou:"From ".concat(null===(n=t.country)||void 0===n?void 0:n.split(" ")[1])})]})]}),Object(N.jsx)(L.a,{className:e.btnContainer,children:Object(N.jsx)(W.a,{size:"small",color:"primary",onClick:function(){return v(t.uid)},children:"Remove match"})}),Object(N.jsx)(W.a,{className:De.a.btnStyle,onClick:function(){return e=t.uid,void r(o===e?"":e);var e},children:o===t.uid?"Show less":"Show more"})]},t.uid)}))})]})}var Ve=n(149),Ge=n.n(Ve),Je=n(41),He=n.n(Je),Xe=n(148),Ze=n.n(Xe),Ke=n(310),Qe=Object(l.a)((function(e){return{head:{width:e.spacing(4),height:e.spacing(4),margin:e.spacing(1)},timestamp:{color:"gray",fontSize:"8px"},active:{background:"rgba(255, 255, 255, 0.4)",borderRadius:"2rem 0 0 2rem"},missed:{border:"2px solid #e66465"}}}));function $e(e){var t=e.selectTargetChat,n=e.chat,c=e.isActive,o=Qe(),r=Object(C.c)((function(e){return e.allUsers})),s=Object(C.c)((function(e){return e.currentUser.uid})),l=n.id.split("_").filter((function(e){return e!==s})).join(""),u=r.find((function(e){return e.uid===l})),d=Object(a.useState)(n),j=Object(i.a)(d,2),b=j[0],h=j[1],m=Object(a.useState)(!1),g=Object(i.a)(m,2),O=g[0],p=g[1];Object(a.useEffect)((function(){if(n.messages.length>0){var e=n.messages[n.messages.length-1].sender;b.messages.length===n.messages.length||e===s||c||(p(!0),h(n)),c&&p(!1)}}),[n,c,b.messages.length]);return Object(N.jsxs)("span",{style:O?{borderRight:"3px solid #e66465"}:{},className:c?o.active:"",onClick:function(){t(n.id,u)},children:[Object(N.jsx)(Ke.a,{className:o.head,alt:u.name,src:u.images[0]}),u.name]},u.id)}var qe=Object(l.a)((function(e){return{head:{width:e.spacing(4),height:e.spacing(4),margin:e.spacing(1)},timestamp:{color:"gray",fontSize:"8px"}}}));function et(e){var t,n=e.message,a=qe(),c=Object(C.c)((function(e){return e.allUsers})),o=Object(C.c)((function(e){return e.currentUser})),r=n.sender===o.uid?"sent":"received",i=null===(t=c.find((function(e){return e.uid===n.sender})))||void 0===t?void 0:t.images[0];return Object(N.jsxs)("div",{className:["".concat(He.a.message," ").concat(He.a[r])],children:[Object(N.jsx)(Ke.a,{className:a.head,alt:n.sender,src:i}),Object(N.jsx)("p",{children:n.message}),Object(N.jsx)("span",{children:new Date(n.createdAt).toDateString()})]})}function tt(){var e=Object(C.c)((function(e){return e.currentUser})),t=(Object(C.c)((function(e){return e.allUsers})),Object(a.useState)("")),n=Object(i.a)(t,2),c=n[0],o=n[1],r=Object(a.useState)([]),s=Object(i.a)(r,2),l=s[0],u=s[1],d=Object(a.useState)(""),j=Object(i.a)(d,2),b=j[0],h=j[1],m=Object(a.useState)(""),g=Object(i.a)(m,2),O=g[0],f=g[1],v=Object(a.useRef)(),w=x.collection("chatRooms").where("users","array-contains",e.uid);Object(a.useEffect)((function(){w.onSnapshot((function(e){var t=[];e.forEach((function(e){var n=e.data(),a=Object(I.a)(Object(I.a)({},n),{},{id:e.id});0!==a.messages.length?t.unshift(a):t.push(a)}));var n=t.sort((function(e,t){return t.lastMessageTimestamp-e.lastMessageTimestamp}));u(n)}))}),[]),Object(a.useEffect)((function(){v.current.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}),[l,v,b]);var S=function(){var t=Object(ie.a)(re.a.mark((function t(n){return re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,a=b,r=e.uid,i=c,void x.collection("chatRooms").doc(a).update({messages:y.firestore.FieldValue.arrayUnion({message:i,sender:r,createdAt:Date.now()}),lastMessageTimestamp:Date.now()});case 3:console.log("izpratih ei tui: ",c,"v chata: ",b,"ot: ",e.uid),o(""),v.current.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"});case 6:case"end":return t.stop()}var a,r,i}),t)})));return function(e){return t.apply(this,arguments)}}(),k=function(e,t){h(e),f(t.name)},M=Object(a.useMemo)((function(){var e=l.findIndex((function(e){return e.id===b}));return l[e]}),[b,l]);return Object(N.jsx)(p.a,{children:Object(N.jsxs)("div",{className:He.a.chatContainer,children:[Object(N.jsx)("div",{className:He.a.profilesInChat,children:Object(N.jsx)("div",{className:He.a.innerDivChat,children:l.length>0&&l.map((function(e){return Object(N.jsx)($e,{chat:e,isActive:b===e.id,selectTargetChat:k},e.id)}))})}),Object(N.jsxs)("main",{className:He.a.chat,children:[Object(N.jsxs)("div",{className:He.a.messageContainer,children:[M&&M.messages.map((function(e){return Object(N.jsx)(et,{message:e},e.createdAt)})),Object(N.jsx)("div",{ref:v})]}),Object(N.jsxs)("form",{className:He.a.chatForm,onSubmit:S,children:[Object(N.jsx)("input",{value:c,onChange:function(e){return o(e.target.value)},placeholder:M?"Chat with ".concat(O):""}),Object(N.jsx)("button",{type:"submit",disabled:!M||!c,children:Object(N.jsx)(Ze.a,{})})]})]})]})})}var nt=Object(l.a)((function(e){return{paper:{position:"fixed !important",bottom:"50px",right:"50px",color:"rgb(136, 25, 163)",backgroundColor:"rgba(255,255,255,0.5)","& .MuiFab-root:hover":{backgroundColor:"#e66465","& .MuiSvgIcon-root":{color:"rgb(225,225,225)",zIndex:2}},zIndex:2},smallBtn:{position:"absolute",width:"50px",height:"50px","& .MuiSvgIcon-root":{width:"30px"},color:"#e66465",background:"rgb(225,225,225)"}}}));var at=function(){var e=Object(C.b)(),t=nt(),n=Object(a.useState)(!1),c=Object(i.a)(n,2),o=c[0],r=c[1],l=Object(a.useState)(!0),u=Object(i.a)(l,2),d=u[0],j=u[1],b=Object(C.c)((function(e){return e.currentUser}));return Object(a.useEffect)((function(){v.onAuthStateChanged((function(t){t?x.collection("users").doc(t.uid).get().then((function(t){e({type:"userLoggedIn",payload:t.data()}),j(!1)})):(e({type:"userLoggedOut"}),j(!1))}))}),[]),Object(a.useEffect)((function(){x.collection("users").onSnapshot((function(t){var n=[];t.forEach((function(e){n.push(e.data())})),e({type:"getAllUsers",payload:n})}))}),[]),Object(a.useEffect)((function(){var t=JSON.parse(window.localStorage.getItem("chosenProfile"));e({type:"setChosenProfile",payload:t})}),[]),d?Object(N.jsx)("div",{style:{margin:"calc(50vh - 100px) auto"},children:Object(N.jsx)(be.a,{size:100})}):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(p.a,{}),Object(N.jsx)("header",{children:Object(N.jsx)(k,{user:b})}),Object(N.jsx)("main",{className:"App",children:Object(N.jsxs)(s.d,{children:[Object(N.jsx)(s.b,{exact:!0,path:"/",children:b.uid?Object(N.jsx)(ee,{}):Object(N.jsx)(s.a,{to:"/login"})}),Object(N.jsx)(s.b,{path:"/chosenProfile/:id",children:b.uid?Object(N.jsx)(Le,{}):Object(N.jsx)(s.a,{to:"/register"})}),Object(N.jsx)(s.b,{exact:!0,path:"/login",children:b.uid?Object(N.jsx)("div",{children:Object(N.jsx)(s.a,{to:"/"})}):Object(N.jsx)(_e,{})}),Object(N.jsx)(s.b,{exact:!0,path:"/register",children:b.uid?Object(N.jsx)("div",{children:Object(N.jsx)(s.a,{to:"/"})}):Object(N.jsx)(Ae,{})}),b.uid?Object(N.jsx)(s.b,{exact:!0,path:"/matches",children:Object(N.jsx)(Ye,{})}):Object(N.jsx)(s.a,{to:"/register"}),b.uid?Object(N.jsx)(s.b,{path:"/matches/:id",children:Object(N.jsx)(Be,{})}):Object(N.jsx)(s.a,{to:"/register"}),Object(N.jsx)(s.b,{exact:!0,path:"/profile",children:b.uid?Object(N.jsx)(pe,{}):Object(N.jsx)(s.a,{to:"/profile"})}),Object(N.jsx)(s.b,{path:"*",children:Object(N.jsx)(s.a,{to:"/"})})]})}),b.uid&&o&&Object(N.jsx)(tt,{}),b.uid&&Object(N.jsx)(m.a,{className:t.paper,children:Object(N.jsx)(se.a,{title:o?"Close Chat":"Open Chat",className:t.tooltip,arrow:!0,TransitionComponent:le.a,placement:"top",children:Object(N.jsx)(ue.a,{component:"span",className:t.smallBtn,children:Object(N.jsx)(Ge.a,{fontSize:"large",onClick:function(){r(!o)}})})})})]})},ct=(n(240),n(69)),ot=[],rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"addToRemoved":return[].concat(Object(A.a)(e),[t.payload]);case"setRemoved":return t.payload;default:return e}},it={uid:"",name:"",email:"",aboutYou:"",age:null,collageOrUni:"",company:"",country:"",city:"",gender:"",jobTitle:"",images:[],mediaProfiles:[],sexualOrientation:"",youtubeSong:"",passions:[],chats:[],isOnline:!1,liked:[],disliked:[],matches:[]},st=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"userLoggedIn":return Object(I.a)({},t.payload);case"userLoggedOut":return it;case"userChangedProfilePic":return Object(I.a)(Object(I.a)({},e),{},{images:t.payload});case"userChangedAboutYou":return Object(I.a)(Object(I.a)({},e),{},{aboutYou:t.payload});case"userChangedGender":return Object(I.a)(Object(I.a)({},e),{},{gender:t.payload});case"userChangedLivingIn":return Object(I.a)(Object(I.a)({},e),{},{country:t.payload});case"userChangedPassions":return Object(I.a)(Object(I.a)({},e),{},{passions:t.payload});case"userChangedOrientation":return Object(I.a)(Object(I.a)({},e),{},{sexualOrientation:t.payload});case"userChangedJobTitle":return Object(I.a)(Object(I.a)({},e),{},{jobTitle:t.payload});case"userChangedCompany":return Object(I.a)(Object(I.a)({},e),{},{company:t.payload});case"userChangedCollegeOrUni":return Object(I.a)(Object(I.a)({},e),{},{collageOrUni:t.payload});case"userAddedToLiked":return Object(I.a)(Object(I.a)({},e),{},{liked:[].concat(Object(A.a)(e.liked),[t.payload])});case"userRemovedFromLiked":return Object(I.a)(Object(I.a)({},e),{},{liked:t.payload});case"userAddedToDisliked":return Object(I.a)(Object(I.a)({},e),{},{disliked:[].concat(Object(A.a)(e.disliked),[t.payload])});case"userAddedToMatches":return Object(I.a)(Object(I.a)({},e),{},{matches:[].concat(Object(A.a)(e.matches),[t.payload])});case"userRemovedFromMatches":return Object(I.a)(Object(I.a)({},e),{},{matches:t.payload});default:return e}},lt=[],ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"getAllUsers":return Object(A.a)(t.payload);default:return e}},dt={uid:"",name:"",email:"",aboutYou:"",age:null,collageOrUni:"",company:"",country:"",city:"",gender:"",jobTitle:"",images:[],mediaProfiles:[],sexualOrientation:"",youtubeSong:"",passions:[],chats:[],isOnline:!1,liked:[],disliked:[],matches:[]},jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setChosenProfile":return t.payload;default:return e}},bt=Object(ct.b)({currentUser:st,allUsers:ut,alreadyRemoved:rt,chosenProfile:jt}),ht=Object(ct.d)(bt,Object(ct.c)(window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));r.a.render(Object(N.jsx)(C.a,{store:ht,children:Object(N.jsx)(c.a.StrictMode,{children:Object(N.jsx)(g.a,{children:Object(N.jsx)(p.a,{children:Object(N.jsx)(at,{})})})})}),document.getElementById("root"))},41:function(e,t,n){e.exports={chatContainer:"Chat_chatContainer__AnWHR",profilesInChat:"Chat_profilesInChat__1OBX0",innerDivChat:"Chat_innerDivChat__3KnvM",missedMsg:"Chat_missedMsg__11POX",chat:"Chat_chat__1bjkx",messageContainer:"Chat_messageContainer__1niSv",chatForm:"Chat_chatForm__jXc0E","sign-in":"Chat_sign-in__3JQK4",message:"Chat_message__22gh7",sent:"Chat_sent__1DSIE",received:"Chat_received__2TPvf",heads:"Chat_heads__1IwKS"}}},[[241,1,2]]]);
//# sourceMappingURL=main.1ca5de88.chunk.js.map