(this["webpackJsonptinder-project"]=this["webpackJsonptinder-project"]||[]).push([[0],{149:function(e,t,n){e.exports={btnStyle:"Matches_btnStyle__1K_MD"}},181:function(e,t,n){},193:function(e,t,n){},235:function(e,t,n){},237:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(17),i=n.n(o),r=n(10),s=(n(181),n(23)),l=n(273),u=n(278),d=n(136),j=n.n(d),h=n(302),b=n(152),m=n(154),g=n(32),O=n(279),p=n(276),f=n(69);f.a.initializeApp({apiKey:"AIzaSyBTxAOZJx56d3i9hCiD5ZcYpnp4cvfady4",authDomain:"fir-project-d9b09.firebaseapp.com",projectId:"fir-project-d9b09",storageBucket:"fir-project-d9b09.appspot.com",messagingSenderId:"74333153272",appId:"1:74333153272:web:ebfbec43f8b31327d1980d"});var x=f.a.firestore(),v=(f.a.storage(),f.a.auth()),y=f.a,C=n(15),w=n.p+"static/media/dinderTrans2.19d7ad87.png",k=n(3),N=Object(l.a)((function(e){return{root:{flexGrow:1,width:"100%",marginTop:"50px",fontFamily:"Nunito"},logoPaper:{margin:"".concat(e.spacing(1),"px auto"),background:"rgba(255,255,255,0.3)",padding:"0 10px"},logo:{width:"100px"},appBar:{zIndex:"0",background:"none",padding:"0 ".concat(e.spacing(3),"px")},title:{fontSize:"3rem"},menu:{fontSize:"35px"},noOutline:{outline:"none!important"}}}));function S(){var e=N(),t=c.a.useState(null),n=Object(r.a)(t,2),a=n[0],o=n[1],i=(Boolean(a),Object(C.b)()),s=Object(C.c)((function(e){return e.currentUser}));return Object(k.jsxs)("div",{className:e.root,children:[Object(k.jsx)(p.a,{}),Object(k.jsx)(u.a,{elevation:0,className:e.appBar,children:Object(k.jsxs)(O.a,{container:!0,justify:"space-between",alignItems:"center",children:[Object(k.jsx)(O.a,{item:!0,xs:1,children:Object(k.jsx)(m.a,{className:e.logoPaper,elevation:10,children:Object(k.jsx)("img",{src:w,className:e.logo,alt:"logo"})})}),Object(k.jsx)(O.a,{item:!0,xs:10}),Object(k.jsxs)(O.a,{container:!0,xs:1,justify:"flex-end",children:[Object(k.jsx)(j.a,{className:e.menu,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){o(e.currentTarget)}}),Object(k.jsxs)(b.a,{id:"simple-menu",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:function(){o(null)},children:[Object(k.jsx)(h.a,{noOutline:!0,component:g.b,to:"/",children:"Home"}),s.uid?Object(k.jsxs)("div",{children:[Object(k.jsx)(h.a,{component:g.b,to:"/matches",children:"Kotenca"}),Object(k.jsx)(h.a,{component:g.b,to:"/profile",children:"Profile"}),Object(k.jsx)(h.a,{component:g.b,to:"/",onClick:function(){v.signOut().then(i({type:"userLoggedOut"})).catch((function(e){return console.log(e.message)}))},children:"Logout"})]}):Object(k.jsxs)("div",{children:[Object(k.jsx)(h.a,{component:g.b,to:"/register",children:"Register"}),Object(k.jsx)(h.a,{component:g.b,to:"/login",children:"Login"})]})]})]})]})})]})}var I=n(16),U=n(68),_=n(27),E=n(137),M=n.n(E),A=(n(193),n(139)),B=n.n(A),P=n(138),T=n.n(P),F=n(283),D=n(284),L=n(287),z=n(286),R=n(285),W=n(282),Y=n(155),V=[];var G=function(){var e=Object(C.b)(),t=Object(C.c)((function(e){return e.currentUser})),n=Object(C.c)((function(e){return e.allUsers})),o=Object(a.useState)([]),i=Object(r.a)(o,2),s=i[0],l=i[1],u=Object(a.useState)(),d=Object(r.a)(u,2),j=d[0],h=d[1],b=Object(a.useState)(!0),m=Object(r.a)(b,2),g=m[0],O=m[1],p=Object(a.useMemo)((function(){return Array(s.length).fill(0).map((function(e){return c.a.createRef()}))}),[s.length]);function f(e,t){return e.filter((function(e){return!t.liked.includes(e.uid)&&!t.disliked.includes(e.uid)&&!t.matches.includes(e.uid)&&t.uid!==e.uid}))}Object(a.useEffect)((function(){var e=f(n,t);l(e)}),[]);var v=function(e){console.log(e+" left the screen!!@#@!$!%@!$%#@^&#%&*@!$&^")},w=function(e,t){n.find((function(t){return t.uid===e})).matches,n.find((function(e){return e.uid===t})).matches;x.collection("users").doc(e).update({matches:y.firestore.FieldValue.arrayUnion(t)}),function(e,t){var n=e>t?"".concat(t,"_").concat(e):"".concat(e,"_").concat(t);x.collection("chatRooms").doc(n).set({messages:[],users:[e,t],isTyping:!1}).then((function(){return console.log("Successfully created chatRoom with users: ",[e,t])})).catch((function(e){return console.log("Error on chatRoom creation: ",e.message)}))}(e,t),x.collection("users").doc(t).update({matches:y.firestore.FieldValue.arrayUnion(e)}).then((function(){N("getAllUsers",n.map((function(n){return n.uid===t&&(n.matches=[].concat(Object(_.a)(n.matches),[e]),console.log("Update-vame matches na user: ",t,"---\x3e na ---\x3e",n.matches)),n}))),N("userChangedmatches",t)}))};function N(t,n){e({type:t,payload:n})}var S=function(e,n){console.log("arrProp",e),"matches"!==e&&x.collection("users").doc(t.uid).update(Object(U.a)({},e,y.firestore.FieldValue.arrayUnion(n))).then((function(){N("userChanged".concat(e),n)})).catch((function(e){console.error("Error updating document: ",e)})),v(n),"liked"===e&&x.collection("users").doc(n).get().then((function(e){e.data().liked.includes(t.uid)&&w(t.uid,n)})),"matches"===e&&w(t.uid,n)},E=function(e){var t=s.filter((function(e){return!V.includes(e.uid)}));if(t.length){var n=t[t.length-1].uid,a=s.map((function(e){return e.uid})).indexOf(n);V.push(n),console.log("!!!!!!!!!!!Index: ",a),console.log("!!!!!!!!!!!childRefs: ",p),console.log("!!!!!!!!!!!alreadyRemoved: ",V),console.log("!!!!!!!!!!!characters: ",s),p[a].current.swipe(e)}},A=function(e,a){console.log("arrProp",e),x.collection("users").doc(t.uid).update(Object(U.a)({},e,[].concat(Object(_.a)(t[e]),[a]))).then((function(){N("userLoggedIn",Object(I.a)(Object(I.a)({},t),{},Object(U.a)({},e,[].concat(Object(_.a)(t[e]),[a]))))})).catch((function(e){console.error("Error updating document: ",e)})),"liked"===e&&x.collection("users").doc(a).get().then((function(e){e.data().liked.includes(t.uid)&&w(t.uid,a)})),"matches"===e&&x.collection("users").doc(a).get().then((function(){w(t.uid,a)}));var c=f(n,t).filter((function(e){return e.uid!==a}));l(c)},P=function(){O(!g)};return Object(k.jsxs)("div",{style:{minWidth:"450px",color:"white"},children:[Object(k.jsx)(W.a,{onClick:function(){x.collection("users").doc(t.uid).update({liked:[],disliked:[],matches:[]}).then((function(){e({type:"userLoggedIn",payload:Object(I.a)(Object(I.a)({},t),{},{liked:[],disliked:[],matches:[]})}),console.log("Successfully reset currentUser: ",t)}))},variant:"contained",className:"resetButton",children:"Reset currentUser"}),Object(k.jsx)(W.a,{onClick:function(){x.collection("users").get().then((function(e){return e.forEach((function(e){e.ref.update({disliked:[],matches:[]})}))})).then((function(){e({type:"getAllUsers",payload:n.map((function(e){return e.matches=[]}))})}))},variant:"contained",className:"resetButton",children:"Reset all users"}),g?Object(k.jsxs)("div",{style:{width:"85%",margin:"0 auto"},children:[Object(k.jsx)(T.a,{onClick:P,fontSize:"large",style:{marginTop:"20px"}}),Object(k.jsx)("link",{href:"https://fonts.googleapis.com/css?family=Damion&display=swap",rel:"stylesheet"}),Object(k.jsx)("link",{href:"https://fonts.googleapis.com/css?family=Alatsi&display=swap",rel:"stylesheet"}),Object(k.jsx)("h1",{className:"homeTitle",children:"React Tinder Card"}),Object(k.jsx)("div",{className:"cardContainer",children:s.map((function(e,t){return Object(k.jsx)(M.a,{ref:p[t],className:"swipe",onSwipe:function(t){!function(e,t,n){var a="";switch(e){case"left":a="disliked";break;case"right":a="liked";break;case"up":a="matches";break;case"down":a="disliked"}S(a,t),h(e),V.push(t)}(t,e.uid,e.name)},onCardLeftScreen:function(){return v(e.uid)},children:Object(k.jsx)("div",{style:{backgroundImage:"url("+e.images[0]+")"},className:"card",children:Object(k.jsx)("h3",{children:e.name})})},e.uid)}))}),Object(k.jsxs)("div",{className:"buttons",children:[Object(k.jsx)("button",{onClick:function(){return E("left")},children:"Swipe left!"}),Object(k.jsx)("button",{onClick:function(){return E("right")},children:"Swipe right!"})]}),j?Object(k.jsxs)("h2",{className:"infoText",children:["You swiped ",j]},j):Object(k.jsx)("h2",{className:"infoText",children:"Swipe a card or press a button to get started!"})]}):Object(k.jsxs)("div",{children:[Object(k.jsx)(B.a,{onClick:P,fontSize:"large",style:{marginTop:"20px"}}),Object(k.jsx)("div",{className:"containerCardView",children:Object(k.jsx)("div",{className:"containerCardView",children:s.map((function(e){return Object(k.jsxs)(F.a,{elevation:20,className:"root",children:[Object(k.jsxs)(D.a,{children:[Object(k.jsx)(R.a,{className:"media",image:e.images[0],title:e.name}),Object(k.jsx)(z.a,{children:Object(k.jsxs)(Y.a,{className:"colorBlack",gutterBottom:!0,variant:"h5",component:"h2",children:[e.name.split(" ")[0]," ",e.age]})})]}),Object(k.jsxs)(L.a,{className:"btnContainer",children:[Object(k.jsx)(W.a,{size:"small",color:"primary",onClick:function(){return A("disliked",e.uid)},children:"Dislike"}),Object(k.jsx)(W.a,{size:"small",color:"primary",onClick:function(){return A("liked",e.uid)},children:"Like"})]})]},e.uid)}))})})]})]})},J=n(8),H=n(293),K=n(292),Q=n(301),Z=n(307),X=n(300),q=n(306),$=n(304),ee=n(55),te=n.n(ee),ne=n(92),ae=n(303),ce=n(288),oe=n(289),ie=n(141),re=n.n(ie),se=Object(l.a)((function(e){return{paper:{position:"relative",height:"200px",width:"130px",margin:"13px 13px",backgroundColor:"rgba(255,255,255,0.5)","& .MuiFab-root:hover":{backgroundColor:"#e66465","& .MuiSvgIcon-root":{color:"rgb(225,225,225)"}},"& input":{display:"none"}},divImg:{height:"100%",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},smallBtn:{position:"absolute",top:"-20px",right:"-20px",width:"40px",height:"40px","& .MuiSvgIcon-root":{width:"25px"},color:"#e66465",background:"rgb(225,225,225)"}}})),le=function(e){var t=e.id,n=e.userId,a=e.imgUrl,c=e.replaceImgUrl,o=e.updateImages,i=se();return Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(m.a,{elevation:6,className:i.paper,children:[Object(k.jsx)("div",{className:i.divImg,style:{backgroundImage:"url(".concat(a,")")}}),Object(k.jsx)("input",{accept:"image/*",className:i.input,id:"contained-button-file-".concat(t),multiple:!1,type:"file",onChange:function(e){return function(e){var a=e.target;if(a.files&&a.files[0]){var i=a.files[0],r=i.name.lastIndexOf("."),s=i.name.slice(0,r)+Date.now();console.log(s);var l=y.storage().ref().child("".concat(n,"/").concat(s)).put(i);l.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is "+t+"% done"),e.state){case y.storage.TaskState.PAUSED:console.log("Upload is paused");break;case y.storage.TaskState.RUNNING:console.log("Upload is running")}}),(function(e){console.log("An error occurred on image upload ",e.message)}),(function(){l.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),function(){var n=Object(ne.a)(te.a.mark((function n(){return te.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c(t,e);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()().then((function(e){return o(e)}))}))}))}}(e)}}),Object(k.jsx)("label",{htmlFor:"contained-button-file-".concat(t),children:Object(k.jsx)(ae.a,{title:"Add Photo",arrow:!0,TransitionComponent:ce.a,placement:"right",children:Object(k.jsx)(oe.a,{component:"div",className:i.smallBtn,children:Object(k.jsx)(re.a,{})})})})]})})},ue=Object(l.a)((function(e){return{root:{width:"40vw",minWidth:"400px",margin:"0 auto","& .MuiSvgIcon-root.MuiSelect-icon ":{color:"white"},"& .MuiInput-underline:hover:not(.Mui-disabled):before":{borderBottomColor:"white"},"& .MuiInput-underline.Mui-disabled:before":{borderBottom:"1px solid rgb(205,205,205)"},"& .MuiInput-underline:before":{borderBottomColor:"white"},"&:hover":{borderBottomColor:"red"},"& input.MuiInputBase-input.MuiInput-input":{color:"white"},"& div.MuiSelect-select.MuiSelect-selectMenu.MuiInputBase-input.MuiInput-input":{color:"white"}},paper:{margin:"5px 0",background:"none",color:"white"},item:{width:"100%",margin:"20px 0"},button:{color:"#e66465",background:"#9198e5"},input:{display:"none",color:"white","& .MuiInputBase-input":{color:"white"}},formControl:{"& .MuiSelect-select:focus":{background:"none"},minWidth:"250px",margin:0}}})),de=Object(J.a)({root:{"& label":{color:"rgb(225, 225, 225)"},"& label.Mui-focused":{color:"rgb(225, 225, 225)"},"& .MuiInput-underline:before":{borderBottomColor:"white"},"& .MuiInput-underline:after":{borderBottomColor:"#1976d2"},"& .MuiOutlinedInput-root":{color:"rgb(225, 225, 225)","& fieldset":{borderColor:"rgb(225, 225, 225)"},"&:hover fieldset":{borderColor:"rgb(225, 225, 225)"}}}})($.a),je=function(){var e=Object(C.b)(),t=Object(C.c)((function(e){return e.currentUser})),n=x.collection("users").doc(t.uid),c=ue(),o=Object(a.useState)(t.aboutYou),i=Object(r.a)(o,2),s=i[0],l=i[1],u=t.passions.join(", "),d=Object(a.useState)(u),j=Object(r.a)(d,2),b=j[0],g=j[1],f=Object(a.useState)(t.gender),v=Object(r.a)(f,2),y=v[0],w=v[1],N=Object(a.useState)(t.sexualOrientation),S=Object(r.a)(N,2),I=S[0],U=S[1],E=t.country.split(" ")[0],M=t.country.split(" ")[1],A=Object(a.useState)(E),B=Object(r.a)(A,2),P=B[0],T=B[1],F=Object(a.useState)([]),D=Object(r.a)(F,2),L=D[0],z=D[1],R=Object(a.useState)(M),W=Object(r.a)(R,2),V=W[0],G=W[1],J=Object(a.useState)([]),$=Object(r.a)(J,2),ee=$[0],te=$[1],ne=Object(a.useState)(t.jobTitle),ae=Object(r.a)(ne,2),ce=ae[0],oe=ae[1],ie=Object(a.useState)(t.company),re=Object(r.a)(ie,2),se=re[0],je=re[1],he=Object(a.useState)(t.collageOrUni),be=Object(r.a)(he,2),me=be[0],ge=be[1];Object(a.useEffect)((function(){P&&fetch("https://restcountries.eu/rest/v2/region/"+P).then((function(e){return e.json()})).then((function(e){return z(e)})).catch((function(e){return console.log(e)}))}),[P]),Object(a.useEffect)((function(){x.collection("users").doc("".concat(t.uid)).get().then((function(e){if(e.exists){var t=fe(e.data().images,6);te(t)}})).catch((function(e){console.log("Error getting document:",e)}))}),[]);var Oe=function(e){return x.collection("users").doc("".concat(t.uid)).update({images:e}).then((function(){console.log("Document successfully updated!")})).catch((function(e){console.error("Error updating document: ",e)}))},pe=function(t,n){var a=Object(_.a)(ee);return a[t]=n,te(a),e({type:"userChangedProfilePic",payload:a}),a},fe=function(e,t){var n=Object(_.a)(e);return n.length=t,e.length<t&&n.fill("",e.length),n};return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(p.a,{}),Object(k.jsx)("form",{noValidate:!0,autoComplete:"off",children:Object(k.jsxs)(O.a,{container:!0,className:c.root,direction:"column",children:[Object(k.jsx)(O.a,{item:!0,children:Object(k.jsx)(m.a,{elevation:0,className:c.paper,children:Object(k.jsxs)(O.a,{container:!0,direction:"column",children:[Object(k.jsx)(O.a,{item:!0,className:c.item,children:Object(k.jsx)(Y.a,{variant:"h4",children:"Upload your images"})}),Object(k.jsx)(O.a,{container:!0,justify:"center",wrap:"wrap",style:{margin:"30px 0",padding:"20px"},children:ee.map((function(e,n){return Object(k.jsx)(O.a,{xs:"auto",item:!0,children:Object(k.jsx)(le,{id:n,userId:t.uid,replaceImgUrl:pe,updateImages:Oe,imgUrl:ee[n]||""},n)})}))})]})})}),Object(k.jsx)(O.a,{item:!0,children:Object(k.jsx)(m.a,{elevation:0,className:c.paper,children:Object(k.jsxs)(O.a,{container:!0,direction:"column",alignItems:"center",children:[Object(k.jsx)(O.a,{item:!0,className:c.item,children:Object(k.jsx)(Y.a,{variant:"h4",children:"About you"})}),Object(k.jsx)(O.a,{item:!0,xs:"auto",style:{width:"80%",marginBottom:"30px"},children:Object(k.jsx)(de,{id:"outlined-multiline-flexible",label:"About you",multiline:!0,rows:4,rowsMax:4,fullWidth:!0,value:s,onChange:function(e){l(e.target.value)},onBlur:function(a){t.aboutYou!==s&&n.update({aboutYou:a.target.value}).then((function(){console.log("Updated successfully"),e({type:"userChangedAboutYou",payload:a.target.value})})).catch((function(e){console.log("Error updating",e)}))},variant:"outlined"})})]})})}),Object(k.jsx)(O.a,{item:!0,children:Object(k.jsx)(m.a,{elevation:0,className:c.paper,children:Object(k.jsxs)(O.a,{container:!0,direction:"column",alignItems:"center",children:[Object(k.jsx)(O.a,{item:!0,className:c.item,children:Object(k.jsx)(Y.a,{variant:"h4",children:"Passions"})}),Object(k.jsx)(O.a,{item:!0,xs:"auto",style:{width:"80%",marginBottom:"30px"},children:Object(k.jsx)(de,{id:"outlined-multiline-flexible",label:"Passions",multiline:!0,rows:4,rowsMax:4,fullWidth:!0,value:b,onChange:function(e){g(e.target.value)},onBlur:function(a){var c=b.split(", ");t.passions.join(", ")!==c&&n.update({passions:c}).then((function(){console.log("Updated successfully"),e({type:"userChangedPassions",payload:c})})).catch((function(e){console.log("Error updating",e)}))},variant:"outlined",placeholder:'Separate them by ", "'})})]})})}),Object(k.jsx)(O.a,{item:!0,children:Object(k.jsx)(m.a,{elevation:0,className:c.paper,children:Object(k.jsxs)(O.a,{container:!0,direction:"column",alignItems:"center",children:[Object(k.jsx)(O.a,{item:!0,className:c.item,children:Object(k.jsx)(Y.a,{variant:"h4",children:"Gender:"})}),Object(k.jsx)(O.a,{item:!0,xs:"auto",style:{justifyContent:"center"},children:Object(k.jsxs)(Z.a,{style:{margin:"0 auto"},row:!0,"aria-flowto":"right","aria-label":"gender",name:"gender1",value:y,onChange:function(t){w(t.target.value),n.update({gender:t.target.value}).then((function(){console.log("updated successfully"),e({type:"userChangedGender",payload:t.target.value})})).catch((function(e){console.log("Error updating",e)}))},children:[Object(k.jsx)(H.a,{className:c.radio,value:"female",control:Object(k.jsx)(X.a,{color:"secondary"}),label:"Female"}),Object(k.jsx)(H.a,{value:"male",control:Object(k.jsx)(X.a,{color:"primary"}),label:"Male"}),Object(k.jsx)(H.a,{value:"other",control:Object(k.jsx)(X.a,{color:"default"}),label:"Other"})]})})]})})}),Object(k.jsx)(O.a,{item:!0,children:Object(k.jsx)(m.a,{elevation:0,className:c.paper,children:Object(k.jsxs)(O.a,{container:!0,direction:"column",alignItems:"center",children:[Object(k.jsx)(O.a,{item:!0,className:c.item,children:Object(k.jsx)(Y.a,{variant:"h4",children:"Sexual orientation:"})}),Object(k.jsx)(O.a,{item:!0,xs:"auto",className:c.item,children:Object(k.jsx)(K.a,{className:c.formControl,children:Object(k.jsxs)(Q.a,{variant:"standard",labelId:"demo-simple-select-label",id:"sexualOrientation-select",value:I,onChange:function(t){U(t.target.value),n.update({sexualOrientation:t.target.value}).then((function(){console.log("updated successfully"),e({type:"userChangedOrientation",payload:t.target.value})})).catch((function(e){console.log("Error updating",e)}))},children:[Object(k.jsx)(h.a,{value:"Straight",children:"Straight"}),Object(k.jsx)(h.a,{value:"Gay",children:"Gay"}),Object(k.jsx)(h.a,{value:"Lesbian",children:"Lesbian"}),Object(k.jsx)(h.a,{value:"Bisexual",children:"Bisexual"}),Object(k.jsx)(h.a,{value:"Asexual",children:"Asexual"}),Object(k.jsx)(h.a,{value:"Demisexual",children:"Demisexual"}),Object(k.jsx)(h.a,{value:"Queer",children:"Queer"}),Object(k.jsx)(h.a,{value:"Questioning",children:"Questioning"})]})})})]})})}),Object(k.jsx)(O.a,{item:!0,children:Object(k.jsx)(m.a,{elevation:0,className:c.paper,children:Object(k.jsxs)(O.a,{container:!0,direction:"column",alignItems:"center",children:[Object(k.jsx)(O.a,{item:!0,className:c.item,children:Object(k.jsx)(Y.a,{variant:"h4",children:"Living in:"})}),Object(k.jsx)(O.a,{item:!0,xs:"auto",className:c.item,children:Object(k.jsxs)(K.a,{className:c.formControl,children:[Object(k.jsx)(q.a,{style:{color:"white"},children:"Region"}),Object(k.jsxs)(Q.a,{variant:"standard",labelId:"demo-simple-select-label",id:"sexualOrientation-select",value:P,onChange:function(e){T(e.target.value)},children:[Object(k.jsx)(h.a,{value:"africa",children:"Africa"}),Object(k.jsx)(h.a,{value:"americas",children:"Americas"}),Object(k.jsx)(h.a,{value:"asia",children:"Asia"}),Object(k.jsx)(h.a,{value:"europe",children:"Europe"}),Object(k.jsx)(h.a,{value:"oceania",children:"Oceania"})]})]})}),Object(k.jsx)(O.a,{item:!0,xs:"auto",className:c.item,children:Object(k.jsxs)(K.a,{className:c.formControl,children:[Object(k.jsx)(q.a,{style:{color:"white"},disabled:!0,children:"Country"}),Object(k.jsx)(Q.a,{disabled:!P,variant:"standard",labelId:"demo-simple-select-label",id:"country",value:V,onChange:function(t){G(t.target.value),n.update({country:"".concat(P," ").concat(t.target.value)}).then((function(){console.log("updated successfully"),e({type:"userChangedLivingIn",payload:"".concat(P," ").concat(t.target.value)})})).catch((function(e){console.log("Error updating",e)}))},children:L.map((function(e){return Object(k.jsx)(h.a,{value:e.name,children:e.name},e.alpha2Code)}))})]})})]})})}),Object(k.jsx)(O.a,{item:!0,children:Object(k.jsx)(m.a,{elevation:0,className:c.paper,children:Object(k.jsxs)(O.a,{container:!0,direction:"column",alignItems:"center",children:[Object(k.jsx)(O.a,{item:!0,className:c.item,children:Object(k.jsx)(Y.a,{variant:"h4",children:"Job title:"})}),Object(k.jsx)(O.a,{item:!0,xs:"auto",style:{width:"80%",marginBottom:"30px"},children:Object(k.jsx)(de,{id:"standard-secondary",label:"Job title",fullWidth:!0,color:"secondary",value:ce,onChange:function(e){oe(e.target.value)},onBlur:function(a){t.jobTitle!==a.target.value&&n.update({jobTitle:a.target.value}).then((function(){console.log("Updated successfully"),e({type:"userChangedJobTitle",payload:a.target.value})})).catch((function(e){console.log("Error updating",e)}))}})})]})})}),Object(k.jsx)(O.a,{item:!0,children:Object(k.jsx)(m.a,{elevation:0,className:c.paper,children:Object(k.jsxs)(O.a,{container:!0,direction:"column",alignItems:"center",children:[Object(k.jsx)(O.a,{item:!0,className:c.item,children:Object(k.jsx)(Y.a,{variant:"h4",children:"Company:"})}),Object(k.jsx)(O.a,{item:!0,xs:"auto",style:{width:"80%",marginBottom:"30px"},children:Object(k.jsx)(de,{id:"standard-secondary",label:"Company",fullWidth:!0,color:"secondary",value:se,onChange:function(e){je(e.target.value)},onBlur:function(a){t.company!==a.target.value&&n.update({company:a.target.value}).then((function(){console.log("Updated successfully"),e({type:"userChangedCompany",payload:a.target.value})})).catch((function(e){console.log("Error updating",e)}))}})})]})})}),Object(k.jsx)(O.a,{item:!0,children:Object(k.jsx)(m.a,{elevation:0,className:c.paper,children:Object(k.jsxs)(O.a,{container:!0,direction:"column",alignItems:"center",children:[Object(k.jsx)(O.a,{item:!0,className:c.item,children:Object(k.jsx)(Y.a,{variant:"h4",children:"College/Uni:"})}),Object(k.jsx)(O.a,{item:!0,xs:"auto",style:{width:"80%",marginBottom:"30px"},children:Object(k.jsx)(de,{id:"standard-secondary",label:"College/Uni",fullWidth:!0,color:"secondary",value:me,onChange:function(e){ge(e.target.value)},onBlur:function(a){t.collageOrUni!==a.target.value&&n.update({collageOrUni:a.target.value}).then((function(){console.log("Updated successfully"),e({type:"userChangedCollegeOrUni",payload:a.target.value})})).catch((function(e){console.log("Error updating",e)}))}})})]})})})]})})]})},he=n(295),be=n(305),me=n(296),ge=n(294),Oe=n(297),pe=n(298),fe="https://firebasestorage.googleapis.com/v0/b/fir-project-d9b09.appspot.com/o/profilePics%2Fdefault-profile-pic.jpg?alt=media&token=12bd0268-84bd-47ee-9bf7-5ca4269f87d5",xe=Object(l.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),width:"30ch"}},container:{marginTop:"1rem",width:"max-content",margin:"0 auto",display:"flex",maxWidth:"400px"},label:{lineHeight:"4px"},googleIcon:{width:"1.5rem",marginRight:"8px"}}}));function ve(e){e.setCurrentUser;var t=xe(),n=Object(a.useState)(""),c=Object(r.a)(n,2),o=c[0],i=c[1],s=Object(a.useState)(""),l=Object(r.a)(s,2),u=l[0],d=l[1],j=Object(a.useState)(""),h=Object(r.a)(j,2),b=h[0],m=h[1],g=Object(a.useState)(""),O=Object(r.a)(g,2),f=O[0],w=O[1],N=Object(a.useState)(""),S=Object(r.a)(N,2),I=S[0],U=S[1],_=Object(a.useState)(!1),E=Object(r.a)(_,2),M=E[0],A=E[1],B=Object(C.b)();function P(e,t){switch(t){case"firstName":m(e);break;case"lastName":w(e);break;case"email":i(e);break;case"password":d(e);break;case"age":U(e)}}var T=function(e,t){x.collection("users").doc("".concat(e)).set(t).then((function(){console.log("Document successfully written!"),B({type:"userLoggedIn",payload:t})})).catch((function(e){console.error("Error writing document: ",e)}))};return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(p.a,{}),Object(k.jsx)(he.a,{className:t.container,position:"relative",align:"center",children:Object(k.jsxs)("form",{className:t.root,noValidate:!0,autoComplete:"off",children:[Object(k.jsx)($.a,{id:"firstNameInput",autoFocus:!0,error:b.trim().length<4&&0!==b.length,value:b,onChange:function(e){return P(e.target.value,"firstName")},label:"First name",variant:"outlined"}),Object(k.jsx)($.a,{id:"lastNameInput",autoFocus:!0,error:f.trim().length<4&&0!==f.length,value:f,onChange:function(e){return P(e.target.value,"lastName")},label:"Last name",variant:"outlined"}),Object(k.jsx)($.a,{id:"email",autoFocus:!0,type:"email",error:o.trim().length<4&&0!==o.length,value:o,onChange:function(e){return P(e.target.value,"email")},label:"Email",variant:"outlined"}),Object(k.jsxs)(K.a,{variant:"outlined",children:[Object(k.jsx)(q.a,{className:"label",htmlFor:"password",children:"Password"}),Object(k.jsx)(be.a,{id:"password",error:u.trim().length<4&&0!==u.length,value:u,onChange:function(e){return P(e.target.value,"password")},label:"Password",variant:"outlined",type:M?"text":"password",autoComplete:"current-password",endAdornment:Object(k.jsx)(me.a,{position:"end",children:Object(k.jsx)(ge.a,{"aria-label":"toggle password visibility",onClick:function(){A(!M),console.log(M)},onMouseDown:function(e){e.preventDefault()},edge:"end",children:M?Object(k.jsx)(Oe.a,{}):Object(k.jsx)(pe.a,{})})})})]}),Object(k.jsx)($.a,{id:"age",error:I<18&&""!==I,value:I,onChange:function(e){return P(e.target.value,"age")},label:"How old are you?",variant:"outlined",type:"number"}),Object(k.jsx)(W.a,{variant:"contained",color:"primary",onClick:function(){v.setPersistence(y.auth.Auth.Persistence.LOCAL).then((function(){return v.createUserWithEmailAndPassword(o,u)})).then((function(){var e=v.currentUser,t="".concat(b[0]).concat(b.slice(1)," ").concat(f[0]).concat(f.slice(1)),n={uid:e.uid,name:t,email:o,aboutYou:"",age:I,collageOrUni:"",company:"",country:"",city:"",gender:"",jobTitle:"",images:[fe],mediaProfiles:[],sexualOrientation:"",youtubeSong:"",passions:[],chats:[],isOnline:!0,liked:[],disliked:[],matches:[]};T(e.uid,n)})).catch((function(e){return console.log(e.message)})),i(""),m(""),w(""),d(""),U("")},children:"Register"}),Object(k.jsxs)(W.a,{variant:"contained",color:"primary",onClick:function(){var e=new y.auth.GoogleAuthProvider;v.signInWithPopup(e).then((function(e){console.log("logvane s google ",e),console.log("dokato zarejda dali e lognat");var t={uid:e.user.uid,name:e.user.displayName,email:e.user.email,aboutYou:"",age:18,collageOrUni:"",company:"",country:"",city:"",gender:"",jobTitle:"",images:[e.additionalUserInfo.profile.picture||fe],mediaProfiles:[],sexualOrientation:"",youtubeSong:"",passions:[],chats:[],isOnline:!0,liked:[],disliked:[],matches:[]};!function(e,t){var n=x.collection("users").doc(e);n.get().then((function(e){if(!e.exists)return console.log("nqma takyv potrebirel"),n.set(t).then((function(){console.log("Document successfully updated! // syzdadoh takyv potrebitel")})).catch((function(e){console.error("Error updating document: ",e)}));console.log("IVA VECHE takyv potrebirel, ne promenqm bazata"),B({type:"userLoggedIn",payload:t})})).catch((function(e){console.log("Error getting document:",e)}))}(e.user.uid,t)})).catch((function(e){console.log(e.message)}))},children:[Object(k.jsx)("img",{className:t.googleIcon,src:"https://img.icons8.com/ios-filled/50/000000/google-logo.png",alt:"google icon"}),Object(k.jsx)("span",{children:" Continue with Google"})]})]})})]})}var ye=Object(l.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),width:"30ch"}},form:{minWidth:"300px",maxWidth:"400px"},container:{marginTop:"5rem",maxWidth:"500px",margin:"0 auto",display:"flex"},label:{lineHeight:"4px"}}}));function Ce(){var e=ye(),t=Object(a.useState)(""),n=Object(r.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(""),s=Object(r.a)(i,2),l=s[0],u=s[1],d=Object(a.useState)(!1),j=Object(r.a)(d,2),h=j[0],b=j[1],m=Object(C.b)();return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(p.a,{}),Object(k.jsx)(he.a,{className:e.container,position:"relative",align:"center",children:Object(k.jsxs)("form",{className:e.root,noValidate:!0,autoComplete:"off",children:[Object(k.jsx)($.a,{id:"username",fullWidth:"true",autoFocus:!0,error:c.trim().length<4&&0!==c.length,value:c,onChange:function(e){return function(e){o(e.target.value)}(e)},label:"Username",variant:"outlined"}),Object(k.jsxs)(K.a,{variant:"outlined",children:[Object(k.jsx)(q.a,{className:"label",htmlFor:"password",children:"Password"}),Object(k.jsx)(be.a,{id:"password",fullWidth:"true",error:l.trim().length<4&&0!==l.length,value:l,onChange:function(e){return function(e){u(e.target.value)}(e)},label:"Password",variant:"outlined",type:h?"text":"password",autoComplete:"current-password",endAdornment:Object(k.jsx)(me.a,{position:"end",children:Object(k.jsx)(ge.a,{"aria-label":"toggle password visibility",onClick:function(){b(!h),console.log(h)},onMouseDown:function(e){e.preventDefault()},edge:"end",children:h?Object(k.jsx)(Oe.a,{}):Object(k.jsx)(pe.a,{})})})})]}),Object(k.jsx)(W.a,{onClick:function(){v.setPersistence("session").then((function(){return v.signInWithEmailAndPassword(c,l)})).then((function(e){x.collection("users").doc(e.user.uid).get().then((function(e){console.log("=====>",e.data()),m({type:"userLoggedIn",payload:e.data()})}))})).catch((function(e){return console.log(e.message)})),o(""),u("")},variant:"contained",color:"primary",children:"Login"})]})})]})}var we=n(151),ke=(n(235),Object(l.a)({container:{width:"40vw",alignItems:"center",textAlign:"center",color:"white"},name:{marginBottom:"3rem"},textField:{fontSize:"1.2rem",color:"rgb(225,225,225)",margin:"0 auto",width:"100%",padding:"0 5rem",textAlign:"center"}}));function Ne(e){var t=e.chosenProfileId;console.log("chosenProfileId",t);var n=ke(),c=Object(C.c)((function(e){return e.allUsers})),o=Object(a.useState)(null),i=Object(r.a)(o,2),s=i[0],l=i[1],u=Object(a.useState)([]),d=Object(r.a)(u,2),j=d[0],h=d[1];return Object(a.useEffect)((function(){var e=c.find((function(e){return e.uid===t}));l(e),console.log("chosenUser from useEffect: ",s),console.log("chosenProfileId from useEffect: ",t)}),[c]),Object(a.useEffect)((function(){var e=null===s||void 0===s?void 0:s.images.filter((function(e){return""!==e}));h(e)}),[s]),console.log("chosenUser",s),console.log("images",j),Object(k.jsx)(p.a,{children:Object(k.jsxs)("div",{className:n.container,children:[Object(k.jsx)("h2",{className:n.name,children:null===s||void 0===s?void 0:s.name}),Object(k.jsx)(we.a,{images:j,width:300,renderOverlay:function(){return Object(k.jsx)("div",{style:{fontSize:"2rem"},children:"Show"})},overlayBackgroundColor:"tomato"}),Object(k.jsx)("h3",{children:"About me"}),Object(k.jsx)("div",{className:n.textField,children:null===s||void 0===s?void 0:s.aboutYou}),Object(k.jsx)("hr",{}),Object(k.jsx)("h3",{children:"Passions"}),Object(k.jsx)("div",{className:n.textField,children:null===s||void 0===s?void 0:s.passions.join(", ")}),Object(k.jsx)("hr",{}),Object(k.jsx)("h3",{children:"Gender"}),Object(k.jsx)("div",{className:n.textField,children:null===s||void 0===s?void 0:s.gender}),Object(k.jsx)("hr",{}),Object(k.jsx)("h3",{children:"Sexual orientation"}),Object(k.jsx)("div",{className:n.textField,children:null===s||void 0===s?void 0:s.sexualOrientation}),Object(k.jsx)("hr",{}),Object(k.jsx)("h3",{children:"Living in"}),Object(k.jsx)("div",{className:n.textField,children:null===s||void 0===s?void 0:s.country}),Object(k.jsx)("hr",{}),Object(k.jsx)("h3",{children:"Job title"}),Object(k.jsx)("div",{className:n.textField,children:null===s||void 0===s?void 0:s.jobTitle}),Object(k.jsx)("hr",{}),Object(k.jsx)("h3",{children:"Company"}),Object(k.jsx)("div",{className:n.textField,children:null===s||void 0===s?void 0:s.company}),Object(k.jsx)("hr",{}),Object(k.jsx)("h3",{children:"College"}),Object(k.jsx)("div",{className:n.textField,children:null===s||void 0===s?void 0:s.collageOrUni})]})})}var Se=n(149),Ie=n.n(Se),Ue=Object(l.a)((function(e){return{flexColumn:{display:"flex",flexDirection:"column",width:"100%",justifyContent:"center",alignItems:"center"},title:{fontSize:"2rem",width:"max-content"},container:{width:"60%",position:"relative",display:"flex",justifyContent:"center",alignItems:"center",marginTop:"1rem"},item:{margin:"".concat(e.spacing(2),"px"),"&:hover":{boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)"}},root:{position:"relative",backgroundColor:"rgba(255, 255, 255, 0.4)",width:250,height:350,margin:"13px",display:"flex",flexDirection:"column",justifyContent:"space-between"},expanded:{height:"auto",position:"fixed",top:"50px",left:"5%",zIndex:2},media:{height:240},colorBlack:{color:"black"},btnContainer:{marginBottom:"2rem"}}}));function _e(e){var t=e.getChosenMatchId,n=Ue(),c=Object(a.useState)(-1),o=Object(r.a)(c,2),i=o[0],s=o[1],l=Object(C.c)((function(e){return e.currentUser})),u=Object(a.useState)([]),d=Object(r.a)(u,2),j=d[0],h=d[1],b=Object(C.c)((function(e){return e.allUsers})),m=(Object(C.c)((function(e){return e.currentUser.matches})),Object(a.useState)(!0)),p=Object(r.a)(m,2),f=p[0],v=p[1],y=Object(C.b)();Object(a.useEffect)((function(){var e=b.filter((function(e){return l.matches.includes(e.uid)}));h(e)}),[l]),Object(a.useEffect)((function(){(null===j||void 0===j?void 0:j.length)>0&&v(!1)}),[j]);var w=function(e){console.log(e);var t=l.matches.filter((function(t){return t!==e})),n=l.liked.filter((function(t){return t!==e})),a=b.find((function(t){return t.uid===e})),c=a.matches.filter((function(e){return e!==l.uid}));console.log("currUserMatches",t),console.log("currUserLikedProfiles",n),console.log("currUserLikedProfiles sus removedUser: ",l.liked),console.log("removedUser",a),console.log("removedUserMatches",c),x.collection("users").doc(l.uid).update({matches:Object(_.a)(t),liked:Object(_.a)(n)}).then((function(){y({type:"userChangedLiked",payload:e}),y({type:"userChangedMatches",payload:e})})).catch((function(e){return console.log("Error after updating db for currentUser: ",e)})),x.collection("users").doc(e).update({matches:Object(_.a)(c)}).then((function(){var t=Object(_.a)(b);t=t.map((function(t){return t.uid===e&&(t.matches=c),t})),y({type:"getAllUsers",payload:t});var n=j.filter((function(t){return t.uid!==e}));h(n)})).catch((function(e){return console.log("Error after updating db for currentUser: ",e)})),function(e,t){var n=e>t?"".concat(t,"_").concat(e):"".concat(e,"_").concat(t);x.collection("chatRooms").doc(n).delete().then((function(){return console.log("Successfully deleted the chatRoom for users: ",t,e)})).catch((function(e){return console.log("Error on chatRoom deleting: ",e)}))}(e,l.uid)};return f?Object(k.jsx)("h2",{children:"THE PAGE IS LOADING..."}):Object(k.jsxs)("div",{className:n.flexColumn,children:[Object(k.jsx)(Y.a,{className:n.title,children:"Your matches"}),Object(k.jsx)(O.a,{container:!0,className:n.container,children:j.length>0&&j.map((function(e){var a;return Object(k.jsxs)(F.a,{elevation:20,className:i===e.uid?"".concat(n.root," ").concat(n.expanded):n.root,onClick:function(){return n=e.uid,void t(n);var n},children:[Object(k.jsxs)(D.a,{component:g.b,to:"/matches/"+e.uid,children:[Object(k.jsx)(R.a,{className:n.media,image:e.images&&e.images[0]||"https://t4.ftcdn.net/jpg/00/64/67/63/360_F_64676383_LdbmhiNM6Ypzb3FM4PPuFP9rHe7ri8Ju.jpg",title:e.name}),Object(k.jsxs)(z.a,{children:[Object(k.jsxs)(Y.a,{className:n.colorBlack,gutterBottom:!0,variant:"h5",component:"h2",children:[e.name," - ",e.age]}),Object(k.jsx)(Y.a,{variant:"body2",color:"textSecondary",component:"p",children:e.aboutYou?e.aboutYou:"From ".concat(null===(a=e.country)||void 0===a?void 0:a.split(" ")[1])})]})]}),Object(k.jsxs)(L.a,{className:n.btnContainer,children:[Object(k.jsx)(W.a,{size:"small",color:"primary",children:"Chat"}),Object(k.jsx)(W.a,{size:"small",color:"primary",onClick:function(){return w(e.uid)},children:"Dislike"})]}),Object(k.jsx)(W.a,{className:Ie.a.btnStyle,onClick:function(){return t=e.uid,void s(i===t?"":t);var t},children:i===e.uid?"Show less":"Show more"})]},e.uid)}))})]})}var Ee=n(150),Me=n.n(Ee),Ae=n(39),Be=n.n(Ae),Pe=n(308),Te=Object(l.a)((function(e){return{head:{width:e.spacing(4),height:e.spacing(4),margin:e.spacing(1)},timestamp:{color:"gray",fontSize:"8px"},active:{background:"rgba(255, 255, 255, 0.3)",borderRadius:"2rem 0 0 2rem"},missed:{background:"red"}}}));function Fe(e){var t=e.selectTargetChat,n=e.chat,c=e.isActive,o=Te(),i=Object(C.c)((function(e){return e.allUsers})),s=Object(C.c)((function(e){return e.currentUser.uid})),l=n.id.split("_").filter((function(e){return e!==s})).join(""),u=i.find((function(e){return e.uid===l})),d=Object(a.useState)(n),j=Object(r.a)(d,2),h=j[0],b=j[1],m=Object(a.useState)(!1),g=Object(r.a)(m,2),O=(g[0],g[1],Object(a.useState)(!1)),p=Object(r.a)(O,2),f=p[0],x=p[1];Object(a.useEffect)((function(){if(n.messages.length>0){var e=n.messages[n.messages.length-1].sender;h.messages.length===n.messages.length||e===s||c||(x(!0),b(n)),c&&x(!1)}}),[n,c,h.messages.length]);return Object(k.jsxs)("span",{style:f?{border:"2px solid red"}:{},className:c?o.active:"",onClick:function(e){t(n.id)},children:[Object(k.jsx)(Pe.a,{className:o.head,alt:u.name,src:u.images[0]}),u.name]},u.id)}var De=Object(l.a)((function(e){return{head:{width:e.spacing(4),height:e.spacing(4),margin:e.spacing(1)},timestamp:{color:"gray",fontSize:"8px"}}}));function Le(e){var t,n=e.message,a=De(),c=Object(C.c)((function(e){return e.allUsers})),o=Object(C.c)((function(e){return e.currentUser})),i=n.sender===o.uid?"sent":"received",r=null===(t=c.find((function(e){return e.uid===n.sender})))||void 0===t?void 0:t.images[0];return Object(k.jsxs)("div",{className:["".concat(Be.a.message," ").concat(Be.a[i])],children:[Object(k.jsx)(Pe.a,{className:a.head,alt:n.sender,src:r}),Object(k.jsx)("p",{children:n.message}),Object(k.jsx)("span",{children:new Date(n.createdAt).toDateString()})]})}var ze=Object(l.a)((function(e){return{head:{width:e.spacing(4),height:e.spacing(4),margin:e.spacing(1)},timestamp:{color:"gray",fontSize:"8px"}}}));function Re(){ze();var e=Object(C.c)((function(e){return e.currentUser})),t=Object(a.useState)(""),n=Object(r.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)([]),s=Object(r.a)(i,2),l=s[0],u=s[1],d=Object(a.useState)(""),j=Object(r.a)(d,2),h=j[0],b=j[1],m=Object(a.useRef)(),g=x.collection("chatRooms").where("users","array-contains",e.uid);Object(a.useEffect)((function(){g.onSnapshot((function(e){var t=[];e.forEach((function(e){var n=e.data(),a=Object(I.a)(Object(I.a)({},n),{},{id:e.id});0!==a.messages.length?t.unshift(a):t.push(a)}));var n=t.sort((function(e,t){return t.lastMessageTimestamp-e.lastMessageTimestamp}));u(n)}))}),[]),Object(a.useEffect)((function(){m.current.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}),[l,m,h]);var O=function(){var t=Object(ne.a)(te.a.mark((function t(n){return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,a=h,i=e.uid,r=c,void x.collection("chatRooms").doc(a).update({messages:y.firestore.FieldValue.arrayUnion({message:r,sender:i,createdAt:Date.now()}),lastMessageTimestamp:Date.now()});case 3:console.log("izpratih ei tui: ",c,"v chata: ",h,"ot: ",e.uid),o(""),m.current.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"});case 6:case"end":return t.stop()}var a,i,r}),t)})));return function(e){return t.apply(this,arguments)}}(),f=function(e){b(e)},v=Object(a.useMemo)((function(){var e=l.findIndex((function(e){return e.id===h}));return l[e]}),[h,l]);return Object(k.jsx)(p.a,{children:Object(k.jsxs)("div",{className:Be.a.chatContainer,children:[Object(k.jsx)("div",{className:Be.a.profilesInChat,children:Object(k.jsx)("div",{className:Be.a.innerDivChat,children:l.map((function(e){return Object(k.jsx)(Fe,{chat:e,isActive:h===e.id,selectTargetChat:f},e.id)}))})}),Object(k.jsxs)("main",{className:Be.a.chat,children:[Object(k.jsxs)("div",{className:Be.a.messageContainer,children:[v&&v.messages.map((function(e){return Object(k.jsx)(Le,{message:e},e.createdAt)})),Object(k.jsx)("div",{ref:m})]}),Object(k.jsxs)("form",{className:Be.a.chatForm,onSubmit:O,children:[Object(k.jsx)("input",{value:c,onChange:function(e){return o(e.target.value)},placeholder:"say something nice"}),Object(k.jsx)("button",{type:"submit",disabled:!v||!c,children:"\ud83d\udc95"})]})]})]})})}var We=n(299);var Ye=function(){var e=Object(C.b)(),t=Object(a.useState)(!1),n=Object(r.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(!0),l=Object(r.a)(i,2),u=l[0],d=l[1],j=Object(C.c)((function(e){return e.currentUser})),h=Object(a.useState)(null),b=Object(r.a)(h,2),m=b[0],g=b[1];return console.log("Kolko puti se rendnah?!?!?"),Object(a.useEffect)((function(){v.onAuthStateChanged((function(t){t?(x.collection("users").doc(t.uid).get().then((function(t){e({type:"userLoggedIn",payload:t.data()}),d(!1)})),console.log("ima lognat ")):(e({type:"userLoggedOut"}),d(!1),console.log("nqma lognat uj..."))}))}),[]),Object(a.useEffect)((function(){x.collection("users").onSnapshot((function(t){var n=[];t.forEach((function(e){n.push(e.data())})),console.log("Tuk otnovo setvame users ot App.jsx: ",n),e({type:"getAllUsers",payload:n})}))}),[]),u?Object(k.jsx)("div",{style:{margin:"calc(50vh - 100px) auto"},children:Object(k.jsx)(We.a,{size:100})}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(p.a,{}),Object(k.jsx)("header",{children:Object(k.jsx)(S,{user:j})}),Object(k.jsx)("main",{className:"App",children:Object(k.jsxs)(s.d,{children:[Object(k.jsx)(s.b,{exact:!0,path:"/",children:j.uid?Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(G,{})}):Object(k.jsx)(s.a,{to:"/login"})}),Object(k.jsx)(s.b,{exact:!0,path:"/login",children:j.uid?Object(k.jsx)("div",{children:Object(k.jsx)(s.a,{to:"/"})}):Object(k.jsx)(Ce,{})}),Object(k.jsx)(s.b,{exact:!0,path:"/register",children:j.uid?Object(k.jsx)("div",{children:Object(k.jsx)(s.a,{to:"/"})}):Object(k.jsx)(ve,{})}),j.uid?Object(k.jsx)(s.b,{exact:!0,path:"/matches",children:Object(k.jsx)(_e,{getChosenMatchId:function(e){return function(e){g(e)}(e)}})}):Object(k.jsx)(ve,{}),j.uid?m&&Object(k.jsx)(s.b,{path:"/matches/:id",children:Object(k.jsx)(Ne,{chosenProfileId:m})}):Object(k.jsx)(ve,{}),Object(k.jsx)(s.b,{exact:!0,path:"/profile",children:j.uid?Object(k.jsx)(je,{}):Object(k.jsx)(s.a,{to:"/profile"})}),Object(k.jsx)(s.b,{path:"*",children:Object(k.jsx)(s.a,{to:"/"})})]})}),j.uid&&c&&Object(k.jsx)(Re,{}),j.uid&&Object(k.jsx)(Me.a,{fontSize:"large",className:"chatIcon",onClick:function(){o(!c)}})]})},Ve=(n(236),n(64)),Ge={uid:"",name:"",email:"",aboutYou:"",age:null,collageOrUni:"",company:"",country:"",city:"",gender:"",jobTitle:"",images:[],mediaProfiles:[],sexualOrientation:"",youtubeSong:"",passions:[],chats:[],isOnline:!1,liked:[],disliked:[],matches:[]},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"userLoggedIn":return Object(I.a)({},t.payload);case"userLoggedOut":return Ge;case"userChangedProfilePic":return Object(I.a)(Object(I.a)({},e),{},{images:t.payload});case"userChangedAboutYou":return Object(I.a)(Object(I.a)({},e),{},{aboutYou:t.payload});case"userChangedGender":return Object(I.a)(Object(I.a)({},e),{},{gender:t.payload});case"userChangedLivingIn":return Object(I.a)(Object(I.a)({},e),{},{country:t.payload});case"userChangedPassions":return Object(I.a)(Object(I.a)({},e),{},{passions:t.payload});case"userChangedOrientation":return Object(I.a)(Object(I.a)({},e),{},{sexualOrientation:t.payload});case"userChangedJobTitle":return Object(I.a)(Object(I.a)({},e),{},{jobTitle:t.payload});case"userChangedCompany":return Object(I.a)(Object(I.a)({},e),{},{company:t.payload});case"userChangedCollegeOrUni":return Object(I.a)(Object(I.a)({},e),{},{collageOrUni:t.payload});case"userChangedliked":return Object(I.a)(Object(I.a)({},e),{},{liked:[].concat(Object(_.a)(e.liked),[t.payload])});case"userChangeddisliked":return Object(I.a)(Object(I.a)({},e),{},{disliked:[].concat(Object(_.a)(e.disliked),[t.payload])});case"userChangedmatches":return Object(I.a)(Object(I.a)({},e),{},{matches:[].concat(Object(_.a)(e.matches),[t.payload])});default:return e}},He=[],Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"getAllUsers":return Object(_.a)(t.payload);default:return e}},Qe=Object(Ve.b)({currentUser:Je,allUsers:Ke}),Ze=Object(Ve.d)(Qe,Object(Ve.c)(window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));i.a.render(Object(k.jsx)(C.a,{store:Ze,children:Object(k.jsx)(c.a.StrictMode,{children:Object(k.jsx)(g.a,{children:Object(k.jsx)(p.a,{children:Object(k.jsx)(Ye,{})})})})}),document.getElementById("root"))},39:function(e,t,n){e.exports={chatContainer:"Chat_chatContainer__EIVcp",profilesInChat:"Chat_profilesInChat__1b0GJ",innerDivChat:"Chat_innerDivChat__1tiQw",chat:"Chat_chat__2m_BP",active:"Chat_active__1M-Oi",missedMsg:"Chat_missedMsg__2RkTA",messageContainer:"Chat_messageContainer__1EKLz",chatForm:"Chat_chatForm__3DKZ9","sign-in":"Chat_sign-in__3iGNs",message:"Chat_message__Y278M",sent:"Chat_sent__3suxQ",received:"Chat_received__vZeoR",heads:"Chat_heads___BcZl"}}},[[237,1,2]]]);
//# sourceMappingURL=main.8353e357.chunk.js.map